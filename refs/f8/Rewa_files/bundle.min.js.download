(()=>{window.fgSummaryIconsObj=typeof fgSummaryIconsObj<"u"&&fgSummaryIconsObj;window.fgShippingIconsObj=typeof fgShippingIconsObj<"u"&&fgShippingIconsObj;(function(){if(window.fgData?.appearance?.bundle?.content?.shopify_shipping_icon_path&&typeof fgShippingIconsObj<"u"){let e=window.fgData.appearance?.bundle?.content?.shopify_shipping_icon_path;window.fgData.appearance.bundle.content.shipping_icon_path=fgShippingIconsObj[e]??e}if(window.fgData?.appearance?.mix_match?.content?.shopify_shipping_icon_path&&typeof fgShippingIconsObj<"u"){let e=window.fgData.appearance?.mix_match?.content?.shopify_shipping_icon_path;window.fgData.appearance.mix_match.content.shipping_icon_path=fgShippingIconsObj[e]??e}let{proxy:ot,integration:nt,shopifyFunc:it,storefront:V,collect:J,utils:st,customize:at}=window.FGSECOMAPP.helper||{};FGSECOMAPP.variables={...FGSECOMAPP.variables,productsChooseInCollections:[]};let K=FGSECOMAPP.variables.RATE_PRICE??100;FGSECOMAPP.CUSTOM_EVENTS={...FGSECOMAPP.CUSTOM_EVENTS,BOGOS_BUNDLE_INIT:"bogos:bundle-init",BOGOS_BUNDLE_START:"bogos:bundle-start",BOGOS_BUNDLE_ADDED:"bogos:bundle-added",BOGOS_BUNDLE_RENDER:"bogos:bundle-render",BOGOS_QTY_BREAK_RENDER:"bogos:quantity-break-render",BOGOS_MIX_MATCH_RENDER:"bogos:mix-match-render"};let f={BUNDLE_TYPE:{default:"bundle",classic:"classic_bundle",quantity_break:"quantity_break",mix_match:"mix_match",bundle_page:"bundle_page"},APP_REVIEW_OPTION:{bundle:"bundle",gift_slider:"gift_slider"},APP_REVIEW:{judgeme:"judgeme",trustoo:"trustoo"},CUSTOM_OPTIONS:{equal:"equal_to",not_equal:"not_equal_to",contains:"contains",not_contains:"not_contains"},NARROW_TYPE:{product:"variants_ids",product_types:"product_types",product_vendors:"product_vendors",collection:"product_collections",config:"config"},MIX_TYPE:{diff:"diff_set",single:"single_set"},TIER_TYPE:{label:"label",progress:"progress"},DISCOUNT_TYPE:{percentage:"percentage",fixed_amount:"fixed_amount",fixed_price:"fixed_price",free_products:"free_products",cheapest_free:"cheapest_free"},DISCOUNT_FUNCTION:{product:"product_discount",shipping:"shipping_discount"},OBJECT_TYPE:{product:"product",variant:"variant"},LAYOUT_TYPE:{step_by_step:"step_by_step",one_page:"one_page"}};f.TRIGGER_FUNC={[f.BUNDLE_TYPE.quantity_break]:"QB",[f.BUNDLE_TYPE.classic]:"CB",[f.BUNDLE_TYPE.default]:"CB",[f.BUNDLE_TYPE.mix_match]:"MM",[f.BUNDLE_TYPE.bundle_page]:"BP"};let A={BUNDLE_SECTION_FRAME_ID:"#sca_bundle_section_frame",BUNDLE_SECTION_FRAME:`<div class="bogos-bundles-widget" data-bundle-id="{{ bogos_bundle_id }}">
                <div class="bogos-bundles-widget-header">
                    <div class="bogos-bundles-widget-title">{{ bogos_bundle_title }}</div>
                    <div class="bogos-bundles-widget-description">{{ bogos_bundle_description }}</div>
                </div>
                <div class="bogos-bundles-widget-body" style="{{bogos_bundle_overflow}}">
                    {{ bogos_bundle_section_items }}
                    {{ bogos_bundle_free_products }}
                    {{ bogos_bundle_discount_shipping }}
                </div>
                <div class="bogos-bundles-widget-footer {{bogos_custom_style}}">
                    {{ bogos_bundle_footer }}
                </div>
            </div>`,BUNDLE_SECTION_ITEM_ID:"#sca_bundle_section_items",BUNDLE_SECTION_ITEM:`<div class="bogos-bundle-item-container">
                <div class="bogos-bundle-item">
                    <img loading="lazy" class="bogos-bundle-item-img" src="{{ bogos_bundle_item_img }}" alt="{{ bogos_bundle_item_title }}">
                    <div class="bogos-bundle-item-info">
                        <a class="bogos-bundle-item-title" href="{{ bogos_bundle_item_handle }}">{{ bogos_bundle_item_title }}</a>
                        {{ bogos_integration_judgeme }}
                        {{ bogos_integration_trustoo }}
                        <div class="bogos-bundle-item-price">
                            <span class="bogos-bundle-item-discount-price transcy-money">{{ bogos_bundle_item_discount }}</span>
                            <span class="bogos-bundle-item-original-price transcy-money">{{ bogos_bundle_item_original }}</span>
                        </div>
                        <div class="bogos-bundle-item-quantity-select">
                            <div class="bogos-bundle-item-quantity">x{{ bogos_bundle_item_quantity }}</div>
                            <div class="bogos-bundle-item-select-button">{{ bogos_bundle_select_variant }}</div>
                        </div>
                    </div>
                </div>
                <div class="bogos-bundle-variants-collapse">
                   <div class="bogos-bundle-variants-container">
                        {{ bogos_bundle_section_variants }}
                    </div>
                </div>
            </div>`,BUNDLE_SECTION_VARIANT_ID:"#sca_bundle_section_variant",BUNDLE_SECTION_VARIANT:`<div class="bogos-bundle-variant-item">
                <span class="bogos-bundle-variant-item-title">
                    {{ bogos_bundle_option_index }}
                </span>
                <div class="bogos-bundle-variant-option-container" data-product-id="{{bogos_product_id}}">
                    <div class="bogos-bundle-variant-selected" data-variant-id="{{bogos_variant_id}}">{{ bogos_bundle_selected }}</div>
                    <div class="bogos-bundle-variant-item-select">
                        {{ bogos_bundle_option_variants }}
                    </div>
                </div>
            </div>`,BUNDLE_FREE_PRODUCT_CONTAINER_ID:"#sca_bundle_free_products_container",BUNDLE_FREE_PRODUCT_CONTAINER:`<div class="bogos-bundle-free-products-container">
                <div class="bogos-bundle-free-products-header">{{ bogos_free_products_header }}</div>
                <div class="bogos-bundle-free-products-body">
                    {{ bogos_free_products_body }}
                </div>
            </div>`,BUNDLE_FREE_PRODUCT_ID:"#sca_bundle_free_products",BUNDLE_FREE_PRODUCT_SECTION:`<div class="bogos-bundle-free-product-item-container">
                <div class="bogos-bundle-free-product-item">
                    <img loading="lazy" class="bogos-bundle-free-product-item-img" src="{{ bogos_bundle_item_img }}" alt="{{ bogos_bundle_item_title }}">
                    <div class="bogos-bundle-free-product-item-info">
                        <a class="bogos-bundle-free-product-item-title" href="{{ bogos_bundle_item_handle }}">{{ bogos_bundle_item_title }}</a>
                        {{ bogos_integration_judgeme }}
                        {{ bogos_integration_trustoo }}
                         <div class="bogos-bundle-variant-info">
                           <div class="bogos-bundle-free-product-item-variant">{{ bogos_bundle_variant_title }}</div>
                           <div class="bogos-bundle-gift-item-variant-out-stock {{bogos_out_stock_class}}">
                              {{ bogos_variant_out_stock }}
                           </div>
                        </div>
                        <div class="bogos-bundle-free-product-item-price">
                            <span class="bogos-bundle-free-product-item-quantity">x{{ bogos_bundle_item_quantity }}</span>
                            <span class="bogos-bundle-free-product-item-discount-price transcy-money">{{ bogos_bundle_item_discount }}</span>
                            <span class="bogos-bundle-free-product-item-original-price transcy-money">{{ bogos_bundle_item_original }}</span>
                        </div>
                    </div>
                </div>
            </div>`,BUNDLE_SHIPPING_DISCOUNT_SECTION_ID:"#sca_bundle_shipping_discount_section",BUNDLE_SHIPPING_DISCOUNT_SECTION:`<div class="bogos-bundle-shipping-discount-container">
                <div class="bogos-shipping-discount-icon">
                    <img src="{{ bogos_shipping_icon }}" alt="shipping-icon">
                </div>
                <span class="bogos-bundle-shipping-discount-title">
                    {{ bogos_shipping_discount_title }}
                </span>
            </div>`,BUNDLE_SECTION_FOOTER_ID:"#sca_bundle_section_footer",BUNDLE_SECTION_FOOTER:`<div class="bogos-bundles-total">
                <div class="bogos-bundles-total-title transcy-money">{{ bundle_total_price_text }}</div>
                <div class="bogos-bundles-total-price">
                    <span class="bogos-bundles-total-discount-price transcy-money">{{ bundle_discount_price }}</span>
                    <span class="bogos-bundles-total-original-price transcy-money">{{ bundle_original_price }}</span>
                </div>
            </div>
            <button type="button" class="bogos-bundles-button-add">{{ bundle_add_button }}</button>`,QUANTITY_BREAK_SECTION_FRAME_ID:"#sca_bundle_section_frame",QUANTITY_BREAK_SECTION_FRAME:`<div class="bogos-bundles-quantity-break-widget" data-bundle-id="{{ bogos_bundle_id }}">
                <form>
                    <div class="bogos-bundles-quantity-break-widget-header">
                        <div class="bogos-bundles-quantity-break-widget-title">{{ bogos_quantity_break_block_title }}</div>
                        <div class="bogos-bundles-quantity-break-widget-description">{{ bogos_quantity_break_description }}</div>
                    </div>
                    <div class="bogos-bundles-quantity-break-widget-body">
                        {{ bogos_quantity_break_section_items }}
                    </div>
                    <div class="bogos-bundles-quantity-break-widget-footer">
                        {{ bogos_quantity_break_footer }}
                    </div>
                </form>
            </div>`,QUANTITY_BREAK_SECTION_ITEM_ID:"#sca_bundle_quantity_break_section_items",QUANTITY_BREAK_SECTION_ITEM:`<div class="bogos-bundle-quantity-break_item-container">
                <div class="bogos-bundle-quantity-break-item" data-bogos-tier-id="{{ quantity_break_tier_id }}">
                    <label for="bogos_quantity_tier_{{ quantity_break_tier_id }}" class="bogos-quantity-break-input-wrapper">
                        <input type="radio" class="bogos-quantity-break-tier-input" id="bogos_quantity_tier_{{ quantity_break_tier_id }}" name="quantity-break" value="bogos_quantity_tier_{{ quantity_break_tier_id }}">
                    </label>
                    <label class="bogos-bundle-quantity-break-tier-label" for="bogos_quantity_tier_{{ quantity_break_tier_id }}">
                        <div class="bogos-bundle-quantity-break-main-info">
                            <div class="bogos-bundle-quantity-break-item-select-button">{{ quantity_break_select_variant }}</div>
                            <div class="bogos-bundle-quantity-break-name">
                                <div class="bogos-bundle-quantity-break-title">{{ quantity_break_tier_title }}</div>
                                <div class="bogos-bundle-quantity-break-sub-title">{{ quantity_break_tier_sub_title }}</div>
                            </div>
                            <div class="bogos-bundle-quantity-break-sub">
                                <div class="bogos-bundle-quantity-break-label">{{ quantity_break_tier_label }}</div>
                                <div class="bogos-bundle-quantity-break-tag">{{ quantity_break_tier_tag }}</div>
                            </div>
                        </div>
                        <div class="bogos-bundle-quantity-break-item-price">
                            <div class="bogos-bundle-quantity-break-item-discount-price transcy-money">{{ quantity_break_tier_discount }}</div>
                            <div class="bogos-bundle-quantity-break-item-original-price transcy-money">{{ quantity_break_tier_original }}</div>
                        </div>
                    </label>
                </div>
                <div class="bogos-bundle-quantity-break-variants-collapse">
                   <div class="bogos-bundle-quantity-break-variants-container">
                        {{ bogos_bundle_quantity_break_section_variants }}
                    </div>
                </div>
            </div>`,QUANTITY_BREAK_SECTION_VARIANT_ID:"#sca_bundle_quantity_break_section_variant",QUANTITY_BREAK_SECTION_VARIANT:`<div class="bogos-bundle-quantity-break-variant-item">
                <span class="bogos-bundle-quantity-break-variant-item-title">
                    {{ bogos_bundle_quantity_break_option_index }}
                </span>
                <select class="bogos-bundle-quantity-break-variant-item-select">
                    {{ bogos_bundle_quantity_break_option_variants }}
                </select>
            </div>`,QUANTITY_BREAK_SECTION_FOOTER_ID:"#sca_bundle_quantity_break_section_footer",QUANTITY_BREAK_SECTION_FOOTER:`<div class="bogos-bundles-quantity-break-total">
                <div class="bogos-bundles-quantity-break-total-title">{{ quantity_break_total_price_text }}</div>
                <div class="bogos-bundles-quantity-break-price">
                    <div class="bogos-bundles-quantity-break-discount-price transcy-money">{{ quantity_break_total_price_discount }}</div>
                    <div class="bogos-bundles-quantity-break-origin-price transcy-money">{{ quantity_break_total_price_origin }}</div>
                </div>
            </div>
            <button type="button" class="bogos-bundles-quantity-break-button-add">{{ quantity_break_add_button }}</button>
            `,JUDGEME_STAR_RATING_PREVIEW_BADGE:`<div class="bogos-judgeme-integration-review-widget" data-bogos-product-id="{{ bogos_product_id }}">
                <div style='display:none' class='jdgm-prev-badge' data-average-rating="{{ judgeme_average_rating }}"> 
                    {{ judgeme_average_rating_el }}
                </div>
            </div>`,MIX_MATCH_SECTION_FRAME_ID:"#bogos_mix_match_section_frame",MIX_MATCH_SECTION_FRAME:`<div class="bogos-mix-match-widget" data-mix-match-id="{{ bogos_mix_match_id }}" data-mix-match-key="{{ bogos_mix_match_key }}">
                <div class="bogos-mix-match-widget-header">
                    <div class="bogos-mix-match-widget-title">{{ bogos_mix_match_title }}</div>
                    <div class="bogos-mix-match-widget-description">{{ bogos_mix_match_description }}</div>
                    <div class="{{ bogos_labels_container_class }}">
                    <div class="bogos-mix-match-progress-line {{ bogos_check_show_line_progress }}"></div>
                        {{ bogos_mix_match_labels }}
                    </div>
                </div>
                <div class="bogos-mix-match-widget-body">
                    {{ bogos_mix_match_items }}
                </div>
            
                <div class="bogos-mix-match-widget-footer">
                    {{ bogos_mix_match_footer }}
                </div>
            </div>`,MIX_MATCH_SECTION_ITEM_ID:"#bogos_mix_match_section_item",MIX_MATCH_SECTION_ITEM:`<div class="bogos-mix-item-container {{ bogos_mix_item_secondary }}"
             data-variant-id="{{ bogos_mix_item_variant_id }}"
             data-quantity-variant="{{ bogos_mix_item_variant_quantity }}"
             data-check-item="{{ bogos_mix_item_checked }}"
             data-item-original-price="{{ bogos_mix_item_original_price }}"
             data-mix-id="{{ bogos_mix_id }}"
             data-mix-key="{{ bogos_mix_key }}"
             data-mix-available="{{ bogos_mix_item_available }}"
             data-product-id="{{bogos_product_id}}"
            >
                <div class="bogos-mix-item-header">
                    <div class="bogos-mix-item-header-title-container">
                        <input type="checkbox" class="bogos-mix-item-checkbox" checked/>
                        <span class="bogos-mix-item-header-title">
                        {{ bogos_mix_item_header_title }}
                      </span>
                    </div>
                    <span class="bogos-mix-item-choose-product {{ check_show_btn_choose_product }}"
                          data-mix-match-id="{{ bogos_mix_match_id }}" data-mix-item-id="{{ bogos_mix_item_id }}"
                          data-mix-item-key="{{ bogos_mix_item_key }}"
                    >
                     {{ bogos_mix_item_choose_product_btn }}
                    </span>
                </div>
                <div class="bogos-mix-item">
                    <img loading="lazy" class="bogos-mix-item-img" src="{{ bogos_mix_item_img }}" alt="{{ bogos_mix_item_title }}">
                    <div class="bogos-mix-item-info">
                        <a class="bogos-mix-item-title" href="{{ bogos_mix_item_handle }}">{{ bogos_mix_item_title }}</a>
                        {{ bogos_integration_judgeme }}
                        {{ bogos_integration_trustoo }}
                        <div class="bogos-mix-item-variant-quantity">
                            <div class="bogos-mix-item-select-variant-container">
                                <span class="bogos-mix-item-variant-title {{ check_show_mix_item_select }}">
                                  {{ bogos_mix_item_variant_prefix }}
                                </span>
                                <div class="bogos-mix-item-select-variant-wrapper {{check_show_mix_item_select}}">
                                  <div class="bogos-mix-item-select-variant-dropdown">
                                      <div class="bogos-mix-item-select-variant-title-contain">
                                        <span class="bogos-mix-item-select-variant-title" data-variant-id="{{ bogos_mix_item_variant_id }}">{{bogos_variant_title}}</span>
                                      </div>
                                        <div class="bogos-mix-item-select-variant-options">
                                           {{ bogos_mix_item_select_variant_section }}
                                        </div>
                                  </div>
                                </div>
                            </div>
                            <div class="bogos-mix-match-quantity-container">
                                <div class="bogos-mix-match-quantity">
                                    <button type="button" class="bogos-minus-mix-btn">\u2212</button>
                                    <input type="number" class="bogos-mix-match-quantity-input input-box"
                                           value="{{ bogos_mix_min_quantity }}" min="1" max="{{ bogos_mix_item_max }}">
                                    <button type="button" class="bogos-plus-mix-btn">+</button>
                                </div>
                            </div>
                            <div class="bogos-mix-item-out-stock sca-d-none">
                                {{ bogos_mix_item_out_of_stock }}
                            </div>
                        </div>
                        <div class="bogos-mix-item-price">
                            <span class="bogos-mix-item-discount-price">{{ bogos_mix_item_discount_price }}</span>
                            <span class="bogos-mix-item-original-price">{{ bogos_mix_item_original_price }}</span>
                        </div>
                    </div>
                </div>
            </div>`,MIX_MATCH_BADGE_ITEM_ID:"#bogos_mix_match_section_badge_item",MIX_MATCH_BADGE_ITEM:`<div class="bogos-mix-match-badge-item" data-discount-id="{{ bogos_mix_match_discount_id }}">
                <div class="bogos-mix-match-badge-icon">
                    <svg class="default-icon" xmlns="http://www.w3.org/2000/svg" width="15" height="14" viewBox="0 0 15 14"
                         fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M6.37182 1.12281C6.82461 0.173906 8.17531 0.173908 8.62811 1.12281L10.0176 4.03482L13.2165 4.45649C14.2589 4.5939 14.6763 5.87849 13.9138 6.60235L11.5737 8.82374L12.1611 11.9964C12.3526 13.0302 11.2598 13.8241 10.3358 13.3226L7.49996 11.7835L4.66416 13.3226C3.74009 13.8241 2.64735 13.0302 2.83879 11.9964L3.42626 8.82375L1.08616 6.60235C0.323624 5.87849 0.741015 4.5939 1.78339 4.45649L4.98228 4.03482L6.37182 1.12281ZM7.49996 2.24164L6.27761 4.80327C6.09539 5.18515 5.73234 5.44893 5.31283 5.50423L2.49885 5.87516L4.55738 7.82927C4.86426 8.12059 5.00293 8.54738 4.92589 8.96344L4.4091 11.7543L6.90369 10.4004C7.27558 10.1986 7.72434 10.1986 8.09623 10.4004L10.5908 11.7543L10.074 8.96344C9.99699 8.54738 10.1357 8.12059 10.4425 7.82927L12.5011 5.87516L9.68709 5.50423C9.26759 5.44893 8.90454 5.18515 8.72231 4.80327L7.49996 2.24164Z"
                              fill="#998A00"/>
                    </svg>
            
                    <svg class="success-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                        <path d="M7.00016 13.6663C3.31816 13.6663 0.333496 10.6817 0.333496 6.99967C0.333496 3.31767 3.31816 0.333008 7.00016 0.333008C10.6822 0.333008 13.6668 3.31767 13.6668 6.99967C13.6668 10.6817 10.6822 13.6663 7.00016 13.6663ZM6.3355 9.66634L11.0488 4.95234L10.1062 4.00967L6.3355 7.78101L4.4495 5.89501L3.50683 6.83767L6.3355 9.66634Z" fill="#29845A"/>
                    </svg>
                </div>
                <span class="bogos-mix-match-badge-title">
                    {{ bogos_label_mix_match }}
                </span>
            </div>`,MIX_MATCH_PROGRESS_ITEM_ID:"#bogos_mix_match_section_progress_item",MIX_MATCH_PROGRESS_ITEM:`<div class="bogos-mix-match-progress-item" data-discount-id="{{ bogos_mix_match_discount_id }}">
                <div class="bogos-mix-match-progress-icon">
                    <svg class="default-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                        <path d="M7 14C3.1339 14 0 10.8661 0 7C0 3.1339 3.1339 0 7 0C10.8661 0 14 3.1339 14 7C14 10.8661 10.8661 14 7 14ZM7 12.6C8.48521 12.6 9.90959 12.01 10.9598 10.9598C12.01 9.90959 12.6 8.48521 12.6 7C12.6 5.51479 12.01 4.09041 10.9598 3.0402C9.90959 1.99 8.48521 1.4 7 1.4C5.51479 1.4 4.09041 1.99 3.0402 3.0402C1.99 4.09041 1.4 5.51479 1.4 7C1.4 8.48521 1.99 9.90959 3.0402 10.9598C4.09041 12.01 5.51479 12.6 7 12.6Z" fill="#8A8A8A"/>
                        <path d="M12.6875 7C12.6875 10.1411 10.1411 12.6875 7 12.6875C3.85888 12.6875 1.3125 10.1411 1.3125 7C1.3125 3.85888 3.85888 1.3125 7 1.3125C10.1411 1.3125 12.6875 3.85888 12.6875 7Z" fill="#F3F3F3"/>
                    </svg>
            
                    <svg class="success-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                        <path d="M7.00016 13.6663C3.31816 13.6663 0.333496 10.6817 0.333496 6.99967C0.333496 3.31767 3.31816 0.333008 7.00016 0.333008C10.6822 0.333008 13.6668 3.31767 13.6668 6.99967C13.6668 10.6817 10.6822 13.6663 7.00016 13.6663ZM6.3355 9.66634L11.0488 4.95234L10.1062 4.00967L6.3355 7.78101L4.4495 5.89501L3.50683 6.83767L6.3355 9.66634Z" fill="#29845A"/>
                    </svg>
                </div>
                <span class="bogos-mix-match-badge-title">
                    {{ bogos_label_mix_match }}
                </span>
            </div>`,MIX_MATCH_SECTION_SELECT_VARIANT_ID:"#bogos_mix_item_select_variant_section",MIX_MATCH_SECTION_SELECT_VARIANT:`<option data-img="{{ bogos_variant_img }}" value="{{ bogos_variant_id }}" id="{{ bogos_variant_id }}" data-price="{{ bogos_variant_price }}" data-original-price="{{ bogos_original_variant_price }}">
                {{ fg_variant_title }}
            </option>`,MIX_MATCH_SECTION_FOOTER_ID:"#bogos_mix_match_section_footer",MIX_MATCH_SECTION_FOOTER:`<div class="bogos-mix-match-total">
                <div class="bogos-mix-match-total-title transcy-money">{{ bogos_mix_match_total_price_text }}</div>
                <div class="bogos-mix-match-total-price">
                    <span class="bogos-mix-match-total-discount-price transcy-money">{{ bogos_mix_match_discount_price }}</span>
                    <span class="bogos-mix-match-total-original-price transcy-money">{{ bogos_mix_match_original_price }}</span>
                </div>
            </div>
            <button type="button" class="bogos-mix-match-button-add">{{ bogos_mix_match_add_button }}</button>`,MIX_MATCH_COLLECTION_POPUP_ID:"#bogos_mix_match_collection_popup",MIX_MATCH_COLLECTION_POPUP:`<div class="bogos-mix-match-collection-popup-container bogos-mix-match-collection-popup-modal">
                <div class="bogos-mix-match-collection-popup-header">
                    <div class="bogos-mix-match-collection-popup-title">
                        {{ collection_popup_title }}
                    </div>
                     <div class="bogos-mix-match-collection-popup-off"></div>
                </div>
                <div class="bogos-mix-match-collection-popup-body">
                    <div class="bogos-body-container">{{ collection_popup_body }}</div>
                    <div>
                          <button type="button" aria-label="Previous" class="bogos-collection-body-btn nav left-nav"></button>
                    </div>
                    <div>
                          <button type="button" aria-label="Next" class="bogos-collection-body-btn nav right-nav"></button>
                    </div>
                </div>
            </div>`,MIX_MATCH_COLLECTION_POPUP_ITEM_ID:"#bogos_mix_match_collection_product",MIX_MATCH_COLLECTION_POPUP_ITEM:`<div class="bogos-mix-match-collection-product" data-bogos-product-id="{{ bogos_product_id }}">
                 <div class="bogos-mix-match-collection-product-detail">
                    <div class="bogos-mix-match-collection-product-detail-main">
                        <div class="bogos-mix-match-collection-product-img">
                            <img loading="lazy" src="{{ mix_collection_product_img }}" alt="product-collection"  />
                        </div>
                        <div class="bogos-mix-match-collection-product-title">{{ mix_collection_product_title }}</div>
                    </div>
                    {{ mix_variants }}
                 </div>
            </div>`,MIX_MATCH_COLLECTION_VARIANTS_SELECT_ID:"#bogos_mix_match_collection_variants",MIX_MATCH_COLLECTION_VARIANTS_SELECT_ITEM:`<div class="bogos-mix-match-collection-product-variants {{ is_none }}" >
                <div class="bogos-title">{{ mix_collection_title }}</div>
                <div class="bogos-select">
                    <div class="bogos-mix-item-select-variant-wrapper {{check_show_mix_item_select}}">
                      <div class="bogos-mix-item-select-variant-dropdown">
                          <div class="bogos-mix-item-select-variant-title-contain">
                            <span class="bogos-mix-item-select-variant-title" data-variant-id="{{ bogos_variant_id }}">{{bogos_variant_title}}</span>
                          </div>
                            <div class="bogos-mix-item-select-variant-options">
                               {{ bogos_mix_item_select_variant_section }}
                            </div>
                      </div>
                    </div>
                    
                     {{ mix_collection_product_variants }}
               </div>
            </div>`,MIX_MATCH_WIDGET_GIFT_ITEMS_SECTION_ID:"bogos_mix_match_widget_gift_items_section",MIX_MATCH_WIDGET_GIFT_ITEMS_SECTION:`<div class="bogos-mix-match-gift-items-container">
               <div class="bogos-mix-match-gift-items-header">
                 {{ bogos_gift_items_header }}
               </div>
               {{ bogos_gift_items_list }}
            </div>`,MIX_MATCH_WIDGET_GIFT_ITEM_SECTION_ID:"bogos_mix_match_widget_gift_item_section",MIX_MATCH_WIDGET_GIFT_ITEM_SECTION:`<div class="bogos-mix-match-gift-item">
                <img loading="lazy" class="bogos-mix-match-gift-item-img" src="{{ bogos_product_img }}" alt="{{ bogos_product_title }}">
                <div class="bogos-mix-match-gift-item-info">
                    <div class="bogos-mix-match-gift-item-title">{{ bogos_product_title }}</div>
                    {{ bogos_integration_judgeme }}
                    {{ bogos_integration_trustoo }}
                    <div class="bogos-mix-match-variant-info">
                        <div class="bogos-mix-match-gift-item-variant-title">
                          {{ bogos_variant_title }}
                       </div>
                        <div class="bogos-mix-match-gift-item-variant-out-stock {{bogos_out_stock_class}}">
                          {{ bogos_variant_out_stock }}
                       </div>
                    </div>
                    <div class="bogos-mix-match-gift-item-price">
                        <div class="bogos-mix-match-gift-item-quantity">x{{ bogos_product_quantity }}</div>
                        <span class="bogos-mix-match-gift-item-discount-price">{{ bogos_product_discount_price }}</span>
                        <span class="bogos-mix-match-gift-item-original-price">{{ bogos_product_original_price }}</span>
                    </div>
                </div>
            </div>`,MIX_MATCH_SHIPPING_DISCOUNT_SECTION_ID:"#sca_mix_match_shipping_discount_section",MIX_MATCH_SHIPPING_DISCOUNT_SECTION:`<div class="bogos-mix-match-shipping-discount-container">
                <div class="bogos-shipping-discount-icon">
                    <img src="{{ bogos_shipping_icon }}" alt="shipping-icon">
                </div>
                <span class="bogos-mix-match-shipping-discount-title">
                    {{ bogos_shipping_discount_title }}
                </span>
            </div>`,SELECT_PRODUCT_OPTION_ITEM_CUSTOM_SECTION:`<div class="bogos-select-option-custom-item bogos-option-default {{check_activate}}" data-option-name="{{bogos_option_name}}" data-option-value="{{bogos_option_value}}">
                <div class="bogos-option-value-title">
                    {{bogos_option_value_title}}
                </div>
              </div>`,SELECT_PRODUCT_OPTION_ITEM_WITH_COLOR_CUSTOM_SECTION:`<div class="bogos-select-option-custom-item bogos-option-color {{check_activate}}" data-option-name="{{bogos_option_name}}" data-option-value="{{bogos_option_value}}" style="{{bogos_option_color_container_style}}">
               <div class="bogos-option-color-item" style="{{bogos_option_color_style}}"></div>
               <div class="bogos-option-value-title {{check_show_title}}">
                   {{bogos_option_value_title}}
               </div>
            </div>`,SELECT_PRODUCT_OPTION_ITEM_WITH_IMAGE_CUSTOM_SECTION:`<div class="bogos-select-option-custom-item bogos-option-image {{check_activate}}" data-option-name="{{bogos_option_name}}" data-option-value="{{bogos_option_value}}" style="{{bogos_option_color_container_style}}">
                <img src="{{bogos_option_custom_data}}" style="{{bogos_option_image_style}}" alt="{{bogos_option_value}}">
                <div class="bogos-option-value-title {{check_show_title}}">
                    {{bogos_option_value_title}}
                </div>
               </div>`,SELECT_PRODUCT_OPTION_NAME_CONTAINER_SECTION:`<div class="bogos-select-option-name-container" data-option-name="{{bogos_option_name}}">
                 <div class="bogos-select-option-name">
                    {{bogos_option_name}}
                 </div>
                 <div class="bogos-select-option-items">
                     {{bogos_option_items}}
                 </div>
            </div>`},x={items_add_bundle:{},add:async(e,s,t=f.BUNDLE_TYPE.default,r=!0)=>{try{let{quantity_break:m,bundle_page:a,default:_}=f.BUNDLE_TYPE,{current_product:l}=FGSECOMAPP.variables.Shopify,i=t===m?"":Math.random().toString(36).substring(8),o=`${f.TRIGGER_FUNC[t]}_${s}_${t===a?"":l?.id}_${i}`,c=await it.add_items_trigger(e,{_bogos_trigger_id:s,_bogos_trigger:o,_bogos_trigger_type:t},t),n="";if(c.ok){let d=FGSECOMAPP.bundles?.find(u=>u.id?.toString()===s?.toString())?.code;r&&await it.apply_discounts([d]),J.addToCart([{id:s}],t,_).then(),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_BUNDLE_ADDED,{detail:{items:e,code:d}})),await P.renderCart({item_count:1}),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_FG_PROCESS,{detail:{event:"bundle:added"}}))}else n=(await c.json()).message;return{ok:c.ok,message:n}}catch(m){return console.error("BOGOS track: bundle added failed",m),{ok:!1,message:"Something went wrong!"}}},convertDiscountMarket:e=>{if(p.empty(e))return;let{currency:s}=FGSECOMAPP.variables.Shopify??{},t=e?.other_currencies?.find(_=>_.currency===s?.active),{fixed_amount:r,fixed_price:m}=f.DISCOUNT_TYPE,a=p.convertMultiCurrency(e.value);[r,m].includes(e.type)&&(e.value=t?.value??a)},handleTransformProductData:e=>{let s=FGSECOMAPP.productsByID;return e.map(t=>{let r=s[t.id];return{...t,available:r?.available??t?.available??!1,thumbnail:r?.featured_image??t.thumbnail,title:r?.title??t.title,handle:r?.handle??t.handle,options:r?.options??[],variants:t.variants.map(m=>{let a=r?.variants?.find(_=>_.id===m.id);return{...m,title:a?.title??m.title,price:(a?.price??m.price*K)/K,available:a?.available??m?.available??m?.availableForSale??!1,thumbnail:a?.featured_image?.src??r?.featured_image??m.thumbnail??t.thumbnail,options:a?.options??[]}})}})},calculateDiscountPrice:(e,s,t)=>{let r;switch(e.type){case f.DISCOUNT_TYPE.percentage:r=s*(100-e.value)/100;break;case f.DISCOUNT_TYPE.fixed_amount:r=t==="total"?Math.max(0,s-e.value):s;break;case f.DISCOUNT_TYPE.fixed_price:r=t==="total"?e.value:s;break;default:r=s}return r.toFixed(FGSECOMAPP.variables.Shopify?.fg_decimal??2)},renderEmpty:e=>{e.style.display="",e.innerHTML="There is no bundle including this product."},renderAppReviewEl:(e,s=f.APP_REVIEW.judgeme)=>{let t=FGSECOMAPP.fgIntegration?.[s]??{},{display_star_rating:r,bundle:m,status:a}=t?.settings??{};if(!((a&&r&&m)??!1))return"";let l=`bogos_${s}_ratings`,i=p.convertStringToObj(localStorage.getItem(FGSECOMAPP.variables.constants?.[l])??""),{rating:o}=(i??[]).find(({product_id:c})=>c===e)??{};return s===f.APP_REVIEW.judgeme?P.renderStarRatingJudgeme(o,e):P.renderStarRatingTrustoo?.(o,e)},loadScriptBp:()=>{if(!FGSECOMAPP.bundles.some(({type:a})=>a===f.BUNDLE_TYPE.bundle_page))return;let s=document.querySelector("#bogos-bundle-page-script");if(!s)return;let t=document.createElement("script");if(t.src=s?.getAttribute("data-url"),t.async=!0,document.querySelector(`script[src="${t.src}"]`))return;(s?.parentNode??document.querySelector("#bogos-integration-block")??document.body).appendChild(t)},init:async e=>{try{document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_BUNDLE_START));let s=JSON.parse(JSON.stringify(window.fgData?.bundles??[]));FGSECOMAPP.bundles=s?.filter(({start_time:t,end_time:r})=>p.checkValidTimeOffer(t,r)).sort((t,r)=>new Date(t.start_time)-new Date(r.start_time)),await Promise.all([G.init(e),$.init(e),v.init(e)]),x.loadScriptBp()}catch(s){console.warn("BOGOS track: bundle core init failed",s)}},convertProductWithOptions:e=>({...e,optionsConverted:(e?.options??[]).map((s,t)=>{let r=[...new Set(e?.variants?.map(m=>m?.options?.[t]))];return{name:s,values:r.filter(Boolean)}})}),renderProductOptionWithValue:(e,s)=>{let{configs:t=[]}=FGSECOMAPP.fgAppearance?.select_variant??{},r=A.SELECT_PRODUCT_OPTION_NAME_CONTAINER_SECTION,m=A.SELECT_PRODUCT_OPTION_ITEM_CUSTOM_SECTION,a=A.SELECT_PRODUCT_OPTION_ITEM_WITH_COLOR_CUSTOM_SECTION,_=A.SELECT_PRODUCT_OPTION_ITEM_WITH_IMAGE_CUSTOM_SECTION,l={small:"12px",medium:"20px",large:"32px"},i=p.empty(s)?e.variants[0]?.options:e.variants?.find(n=>String(n.id)===String(s))?.options??[],o=e?.optionsConverted??[],c=e?.optionsConvertedDefault??[];return o.map((n,d)=>{let u=t.find(h=>h.data?.option_name===c[d]?.name),b=u?.type==="color",y=u?b?a:_:m,g=n.values?.map((h,E)=>{if(u){let S=u.customize,C=u?.data?.values?.find(T=>T.name===c[d]?.values?.[E])?.label??(b?"#ffffff":"https://d33a6lvgbd0fej.cloudfront.net/bogos-images/1760928468.png");return FGSECOMAPP.helper.templateHTML.render(y,{bogos_option_value:encodeURIComponent(h),bogos_option_value_title:h,bogos_option_custom_data:C,bogos_option_name:n.name,bogos_option_color_style:`background-color: ${C}; width: ${l[S.size]};
                                     height: ${l[S.size]}; border-radius: ${S.shape==="circle"?"50%":"4px"}`,bogos_option_color_container_style:`border-radius: ${S.shape==="circle"&&!S.show_name?"50%":"4px"}`,check_show_title:S.show_name?"":"sca-d-none",check_activate:i?.includes(h)?"bogos-active":"",bogos_option_image_style:`width: ${l[S.size]}; height: ${l[S.size]}; border-radius: ${S.shape==="circle"?"50%":"4px"}`})}else return FGSECOMAPP.helper.templateHTML.render(y,{bogos_option_value:encodeURIComponent(h),bogos_option_value_title:h,bogos_option_name:n.name,check_activate:i?.includes(h)?"bogos-active":""})}).join("");return FGSECOMAPP.helper.templateHTML.render(r,{bogos_option_name:n.name,bogos_option_items:g})}).join("")},handleInvalidVariantOption:(e,s,t)=>{let r=[...e.variants],m=[];s.forEach((a,_)=>{r.some(i=>i.options[_]===a)?r=r.filter(i=>i.options[_]===a):m.push({position:_,value:a})}),t.querySelectorAll(".bogos-select-option-name-container").forEach((a,_)=>{a.querySelectorAll(".bogos-select-option-custom-item").forEach(l=>{let i=decodeURIComponent(l.getAttribute("data-option-value"));m.some(c=>c.position===_&&c.value===i)?l.classList.add("bogos-deactivate"):l.classList.remove("bogos-deactivate")})})},handleValidVariantOption:(e,s,t,r)=>{let m=decodeURIComponent(e.getAttribute("data-option-value")),_=t?.variants?.find(o=>o.id?.toString()===s)?.options??[],l=t?.options.findIndex(o=>e.getAttribute("data-option-name")===o),i=_?.map((o,c)=>l===c?m:o);return r.querySelectorAll(".bogos-select-option-custom-item").forEach(o=>{let c=decodeURIComponent(o.getAttribute("data-option-value"));i.includes(c)?o.classList.add("bogos-active"):o.classList.remove("bogos-active"),o.classList.remove("bogos-deactivate")}),{selectedVariant:t?.variants?.find(o=>o.options.length===i.length&&o.options.every((c,n)=>c===i[n])),newOptions:i}},convertProductWithOptionsDefault:(e,s)=>{let t={...s,optionsDefault:e?.options??[],variants:s.variants.map(r=>{let m=e?.variants?.find(a=>String(a.id)===String(r.id));return{...r,optionsDefault:m?.options??[]}})};return{...t,optionsConvertedDefault:(t?.optionsDefault??[]).map((r,m)=>{let a=[...new Set(t?.variants?.map(_=>_?.optionsDefault?.[m]))];return{name:r,values:a}})}}},G={dataProduct:{},productsTemp:{},filterWithBlocks:e=>{let s={},t=e?FGSECOMAPP.current_bundles:FGSECOMAPP.bundles?.filter(l=>l.type===f.BUNDLE_TYPE.classic||!l.type),{current_product:r}=FGSECOMAPP.variables.Shopify??{},m=p.empty(r?.id)?[]:t?.filter(l=>(l.products?.[0]?.value??l.products).some(o=>o.id===r?.id)),{product_form_query:a}=FGSECOMAPP.QUERY_SELECTOR??{},_=e?[e]:document.querySelectorAll(a?.customize?.join(","));return _.forEach(l=>{let i=Number(p.getIntShopifyId(l.getAttribute("data-product-id"))),o=Number(l.getAttribute("data-offer-id")),c=null;o&&(c=(c??t)?.filter(n=>n.id.toString()===o.toString())),i&&(c=(c??t)?.filter(n=>(n.products?.[0]?.value??n.products).some(u=>u.id.toString()===i?.toString()))),c?.forEach(n=>s[n.id]=n),!o&&!i&&m.forEach(n=>s[n.id]=n)}),_.length||m.forEach(l=>s[l.id]=l),Object.values(s)},filter:async e=>{try{FGSECOMAPP.current_bundles=G.filterWithBlocks();let s=[],t=[],m={handles:[...FGSECOMAPP.current_bundles?.map(a=>{a.products_root=[...a.products],a.products=a.products_root?.[0]?.value??a.products_root;let _=a?.discount[0]??a?.discount,l=_?.discount??_??{};if(l.type===f.DISCOUNT_TYPE.free_products){let i=l.value.map(o=>o.handle);s.push(...l.value.map(o=>o.id)),t.push(...i)}return a})?.reduce((a,_)=>(a=[...a,..._.products.map(l=>(s.push(l.id),l.handle))],[...new Set(a)]),[])??[],...t],ids:s};!e&&await ot.cacheProducts(m?.handles,{"sca-bundle-search":"1"},async()=>{console.info(`BOGOS track: classic-bundle:sync-quantity:${Date.now()}`)},m);try{P.syncStarRating([...new Set(s)]).then()}catch{}FGSECOMAPP.current_bundles=FGSECOMAPP.current_bundles?.filter(a=>{let{discount:_}=a,l=_[0]??_,{discount:i}=l,o=i??_,c=o.type===f.DISCOUNT_TYPE.fixed_amount,n=o.type===f.DISCOUNT_TYPE.fixed_price,d=o.type===f.DISCOUNT_TYPE.free_products,u=o?.discount_function===f.DISCOUNT_FUNCTION.shipping;x.convertDiscountMarket(o),a.discount={...l,discount:o};let b=a.products.every(y=>{let g=FGSECOMAPP.productsByID?.[y.id];return y.variants=y.variants.filter(h=>{let{id:E,price:S}=h,C=g?.variants_quantity??{},{available:T,price:M}=g?.variants?.find(q=>q.id===E)??{};return h.handle=g?.handle??h.handle,h.price=M?M/K:p.convertMultiCurrency(S),C[E]>0||T})??[],y.variants.length>0});if(b){a.original_price=a.products.reduce((g,h)=>{let{variants:E,quantity:S}=h,{price:C}=E?.[0]||{price:0};return g+parseFloat(C??0)*S},0),a.discount.convert=c?o.value/a.original_price*100:o.value,a.discount_price=u?a.original_price:x.calculateDiscountPrice(o,a.original_price,"total"),a.products.forEach(g=>{g.variants.forEach(h=>{let{price:E}=h;h.discount_price=u?E:x.calculateDiscountPrice(o,E)})});let y=0;d&&(o.value??[]).forEach(h=>{let E=FGSECOMAPP.productsByID[h.id];h.variants.forEach(S=>{let C=E?.variants?.find(M=>M.id===S.id),T=parseFloat(S.price)*parseInt(S.quantity??"1");C&&!C?.available&&(T=0),y+=T})}),a.original_price+=y,a.discount.label=n||d||u?"":`(${FGSECOMAPP.helper.templateHTML.render(P.convertIntegration("{{discountAmount}} OFF","customize.bundle_discount_label","customize.bundle_classic.discount_text",!0),{discountAmount:`${c?p.renderPrice(o.value):o.value+"%"}`})})`,x.items_add_bundle[a.id]=a.products.map(g=>{g.quantity=parseInt(`${g.quantity}`);let{variants:h,quantity:E}=g,S={...h[0],quantity:E};return h.length===1?[S]:Array(E).fill({...S,quantity:1})}).flat()}return b})}catch(s){console.warn("BOGOS track: bundle filter",s)}},renderBundleProduct:(e,s,t,r)=>{let{show_discount_each_item:m,select_variant_text:a}=FGSECOMAPP.fgAppearance?.bundle?.content??{},_=FGSECOMAPP.productsByID,{variants:l,id:i,handle:o,title:c,quantity:n}=e,d=_?.[i]??{},u=l?.length===1,b=e?.variants[0]??{},y=d?.variants[0],g=b?.thumbnail??y?.featured_image?.src??d?.featured_image,h=x.renderAppReviewEl(i),E=x.renderAppReviewEl(i,f.APP_REVIEW.trustoo),S=m&&s.type===f.DISCOUNT_TYPE.percentage&&s.value;return FGSECOMAPP.helper.templateHTML.render(t,{bogos_bundle_item_handle:p.routePath(`products/${o}`),bogos_bundle_item_img:p.handleResizeGiftImage(g,!0),bogos_bundle_item_title:d?d.title:c,bogos_product_id:i,bogos_integration_judgeme:h,bogos_integration_trustoo:E,bogos_bundle_item_original:S?p.renderPrice(b.price):"",bogos_bundle_item_discount:p.renderPrice(b.discount_price),bogos_bundle_item_quantity:n,bogos_bundle_select_variant:u?"":`${P.convertIntegration(a??"Select variant","customize.bundle_select_variant","customize.bundle_classic.select_variant_text")} `,bogos_bundle_section_variants:G.renderBundleOptions(l??[],g,n,d,r),product:e})},renderDiscountShipping:(e,s)=>{let t=document.querySelector(A.BUNDLE_SHIPPING_DISCOUNT_SECTION_ID)?.innerHTML??A.BUNDLE_SHIPPING_DISCOUNT_SECTION,{shipping_icon_path:r}=FGSECOMAPP.fgAppearance?.bundle?.content??{};return FGSECOMAPP.helper.templateHTML.render(t,{bogos_shipping_discount_title:P.convertIntegration(s?.shipping_label??s?.shipping_discount?.label??"",`bundle.${e}.shipping_label`,`classic_bundles.${e}.shipping_label`),bogos_shipping_icon:r??fgShippingIconsObj["shipping-icon-1.png"]})},renderFreeProducts:e=>{let s=document.querySelector(A.BUNDLE_FREE_PRODUCT_CONTAINER_ID)?.innerHTML??A.BUNDLE_FREE_PRODUCT_CONTAINER,{free_product_title:t}=FGSECOMAPP.fgAppearance?.bundle?.content??{},r=e.map(m=>m.variants.map(a=>G.renderFreeProductItem(m,a))).flat().join(" ");return FGSECOMAPP.helper.templateHTML.render(s,{bogos_free_products_header:P.convertIntegration(t??"\u{1F381} Free Gift","customize.bundle_classic_free_product_title","customize.bundle_classic.free_product_title"),bogos_free_products_body:r})},renderFreeProductItem:(e,s)=>{let t=document.querySelector(A.BUNDLE_FREE_PRODUCT_ID)?.innerHTML??A.BUNDLE_FREE_PRODUCT_SECTION,{free_price:r,out_stock_text:m}=FGSECOMAPP.fgAppearance?.bundle?.content??{},a=FGSECOMAPP.productsByID,{id:_,handle:l,title:i}=e,o=a?.[_]??{},n=(o?.variants??[]).find(g=>g.id===s.id),d=n?.featured_image?.src??o?.featured_image,u=n?n.title:s.title,b=x.renderAppReviewEl(_),y=x.renderAppReviewEl(_,f.APP_REVIEW.trustoo);return FGSECOMAPP.helper.templateHTML.render(t,{bogos_bundle_item_handle:p.routePath(`products/${l}`),bogos_bundle_item_img:p.handleResizeGiftImage(d,!0),bogos_bundle_item_title:o?o.title:i,bogos_product_id:_,bogos_integration_judgeme:b,bogos_integration_trustoo:y,bogos_bundle_item_original:p.renderPrice(s.price),bogos_bundle_variant_title:p.checkIsDefaultTitle(u)?"":u,bogos_bundle_item_discount:P.convertIntegration(r??"FREE","customize.bundle_classic_free_price","customize.bundle_classic.free_price"),bogos_bundle_item_quantity:s.quantity,bogos_out_stock_class:n&&n?.available?"sca-d-none":"",bogos_variant_out_stock:n&&n?.available?"":P.convertIntegration(m??"Out of stock!","customize.bundle_classic_out_stock_text","customize.bundle_classic.out_stock_text")})},renderBundles:e=>{let s=document.querySelector(A.BUNDLE_SECTION_FRAME_ID)?.innerHTML??A.BUNDLE_SECTION_FRAME,t=document.querySelector(A.BUNDLE_SECTION_ITEM_ID)?.innerHTML??A.BUNDLE_SECTION_ITEM,r=document.querySelector(A.BUNDLE_SECTION_FOOTER_ID)?.innerHTML??A.BUNDLE_SECTION_FOOTER,m=92;return(e??FGSECOMAPP.current_bundles)?.map(a=>{let{show_description:_,show_discount_on_button:l,button_text:i,total_price_text:o}=FGSECOMAPP.fgAppearance?.bundle?.content??{},{discount:c}=a??{},{discount:n,shipping_discount:d}=c??{},u=n??c,b=a.products?.map(z=>G.renderBundleProduct(z,u,t,a.id)).join(" "),y=u.type===f.DISCOUNT_TYPE.free_products,g=!p.empty(d)||a.discount?.discount_function===f.DISCOUNT_FUNCTION.shipping,h=y?u.value:[],E=m*(2+a.products.length)+40,S=m*(a.products.length+h.length)>E,C=G.renderFreeProducts(h),T=G.renderDiscountShipping(a.id,c),M=u.type!==f.DISCOUNT_TYPE.free_products&&l&&u.value,q=Number(Number(a.discount_price)<=Number(a.original_price)?a.discount_price:a.original_price),L=FGSECOMAPP.helper.templateHTML.render(r,{bundle_total_price_text:P.convertIntegration(o??"Total bundle price","customize.bundle_total_price","customize.bundle_classic.total_price_text",!0)+` ${u.type!==f.DISCOUNT_TYPE.free_products&&u.value?a.discount.label??"":""}:`,bundle_discount_price:p.renderPrice(q),bundle_original_price:Number(a.original_price)!==q?p.renderPrice(a.original_price):"",bundle_add_button:P.convertIntegration(i??"Add bundle to cart","customize.bundle_add_to_cart","customize.bundle_classic.button_text",!0)+(M?` ${a.discount.label??""}`:""),bundle:a}),N=p.empty(a?.sub_title)?a.title:a?.sub_title;return FGSECOMAPP.helper.templateHTML.render(s,{bogos_bundle_id:a.id,bogos_bundle_title:P.convertIntegration(N,`bundle.bundle_title_${a.id}`,`classic_bundles.${a.id}.title`),bogos_bundle_description:_?P.convertIntegration(a.description,`bundle.bundle_description_${a.id}`,`classic_bundles.${a.id}.description`):"",bogos_bundle_section_items:b,bogos_bundle_free_products:y?C:"",bogos_bundle_discount_shipping:g?T:"",bogos_bundle_footer:`${L} ${et.BRAND_MARK_TEMPLATE("bogos-bundles-brand-mark")}`,bogos_bundle_overflow:y&&S?`max-height: ${E}px;overflow-y: scroll;`:"",bogos_custom_style:y&&S?"bogos-bundles-footer-box-shadow":"",bundle:a})}).join(" ")},renderBundleOptions:(e,s,t,r,m)=>{let a=r?.variants??[],_={...r,variants:e.map(n=>{let d=r?.variants?.find(u=>String(u.id)===String(n.id));return d||null}).filter(Boolean)},l=e.length===1,i=document.querySelector(A.BUNDLE_SECTION_VARIANT_ID)?.innerHTML??A.BUNDLE_SECTION_VARIANT,{item_index_text:o}=FGSECOMAPP.fgAppearance?.bundle?.content??{},c=l?[t-1]:Array.from({length:t},(n,d)=>d);return c.map(n=>FGSECOMAPP.helper.templateHTML.render(i,{bogos_bundle_option_index:P.convertIntegration(o??"Item","customize.bundle_item_index","customize.bundle_classic.item_text",!0)+` ${c.length===1?"":n+1}`,bogos_bundle_option_variants:G.renderProductOptions(e,x.convertProductWithOptions(_),s,m),bogos_bundle_selected:a.find(d=>d.id===e[0].id)?.title??e[0].title,bogos_product_id:r.id,bogos_variant_id:e[0].id})).join(" ")},render:e=>{let{product_form_query:s}=FGSECOMAPP.QUERY_SELECTOR??{},t=document.querySelectorAll(s?.customize?.join(",")),r=!FGSECOMAPP.current_bundles?.length,m=[];if(r||console.info("BOGOS track: classic-bundle core",e),t.forEach(l=>{let i=G.filterWithBlocks(l),o=!i.length,c=l.querySelector("#bogos-bundle-preview-mode");if(c&&o){x.renderEmpty(c);return}else if(o)return;l.innerHTML=G.renderBundles(i),m.push(...i)}),r)return;if(!t.length){let l=G.renderBundles(),i=[...s?.integration,...s?.default].filter(Boolean).join(",");t=document.querySelector(i);let o=document.createElement("div");o.id="bogos-bundle-view",o.innerHTML=l,t?.appendChild(o),m.push(...FGSECOMAPP.current_bundles)}let{classic:a,default:_}=f.BUNDLE_TYPE;p.empty(m)||(m=Object.values(Object.assign({},...m.map(l=>({[l.id]:l})))),J.sessionViews(m,a,_).then()),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_BUNDLE_RENDER,{detail:{bundles:m,addFunction:(l,i)=>x.add(l,i,a)}}))},renderProductOptions:(e,s,t,r)=>{let m=s?.variants??[],{type:a="variant"}=FGSECOMAPP.fgAppearance?.select_variant??{};if(a==="variant"){let _=`<div class="bogos-bundle-select-variant-option" data-img="{{ bundle_variant_img }}" data-variant-id="{{ bundle_variant_id }}" data-discount-price="{{ bundle_variant_discount_price }}" data-original-price="{{ bundle_variant_original_price }}">
                        {{ bundle_variant_title }}
                    </div>`;return e.map(l=>{let i=m.find(c=>c.id===l.id),o=i?.featured_image?.src??s?.featured_image;return FGSECOMAPP.helper.templateHTML.render(_,{bundle_variant_img:p.handleResizeGiftImage(o??t,!0),bundle_variant_id:l.id,bundle_variant_discount_price:l.discount_price,bundle_variant_original_price:l.price,bundle_variant_title:i?i.title:l.title})}).join("")}else return G.productsTemp[r]={...G.productsTemp[r]??{}},G.productsTemp[r][s.id]=s,V.queryProductDefault(s.id).then(),'<div class="bogos-loading-spinner"></div>'},renderEventQuery:()=>{let e=FGSECOMAPP.QUERY_SELECTOR?.product_form_query?.customize?.filter(Boolean)?.map(t=>`${t} .bogos-bundles-widget`)?.join(","),{type:s="variant"}=FGSECOMAPP.fgAppearance?.select_variant??{};p.empty(e)||document.querySelectorAll(e).forEach(t=>{let r=t.getAttribute("data-bundle-id"),m=FGSECOMAPP.current_bundles?.find(o=>o.id?.toString()===r);if(p.empty(r)||p.empty(m))return;let a=[...x.items_add_bundle?.[r]],{discount:_}=m,l=_?.discount??(_?.discount_function===f.DISCOUNT_FUNCTION.shipping?{type:f.DISCOUNT_TYPE.percentage,value:0}:_),i=(o,c)=>{let n=t.querySelector(`.bogos-bundle-item-container:has([data-variant-id="${o.id}"]) .bogos-bundle-item-img`);!p.empty(o.thumbnail)&&n&&(n.src=o.thumbnail);let d=a?.[c];!p.empty(d)&&(a[c]={...a[c],...o});let u=a.reduce((y,g)=>y+g.price*g.quantity,0);[{query:".bogos-bundles-total-discount-price",price:x.calculateDiscountPrice(l,u,"total")},{query:".bogos-bundles-total-original-price",price:u,disable:!l.value},{query:`.bogos-bundle-item-container:has([data-variant-id="${o.id}"]) .bogos-bundle-item-discount-price`,price:o.discount_price},{query:`.bogos-bundle-item-container:has([data-variant-id="${o.id}"]) .bogos-bundle-item-original-price`,price:o.price,disable:!FGSECOMAPP.fgAppearance?.bundle?.content?.show_discount_each_item||l.type!==f.DISCOUNT_TYPE.percentage||!l.value}].forEach(y=>{y.disable||t.querySelector(y.query)&&(t.querySelector(y.query).innerHTML=p.renderPrice(y.price))})};t.querySelectorAll(".bogos-bundle-variant-option-container:has(.bogos-bundle-select-variant-option)").forEach((o,c)=>{let n=o.querySelector(".bogos-bundle-variant-selected"),d=o.querySelectorAll(".bogos-bundle-select-variant-option"),u=()=>{o.classList.toggle("opened")},b=g=>{n.innerHTML=g.currentTarget.textContent.trim();let h=g.currentTarget.getAttribute("data-variant-id"),E=g.currentTarget.getAttribute("data-original-price");n.setAttribute("data-variant-id",h),n.setAttribute("data-original-price",E);let S={id:h-0,price:E-0,thumbnail:g.currentTarget.getAttribute("data-img"),discount_price:g.currentTarget.getAttribute("data-discount-price")-0};i(S,c)},y=g=>{!o.contains(g.target)&&o.classList.contains("opened")&&o.classList.remove("opened")};document.addEventListener("click",y),d.forEach(g=>{g.addEventListener("click",b)}),o.addEventListener("click",u)}),t.querySelectorAll(".bogos-bundle-variant-option-container:not(:has(.bogos-bundle-select-variant-option))").forEach((o,c)=>{let n=o.getAttribute("data-product-id"),d=o.querySelector(".bogos-bundle-variant-selected"),u=()=>{o.classList.toggle("opened")};d.addEventListener("click",async()=>{if(u(),s==="option"&&!o.querySelector(".bogos-select-option-name-container")){let y=o.querySelector(".bogos-bundle-variant-item-select"),g=G.productsTemp[r][n]??{};FGSECOMAPP.productsDefaultByID[g.id]||await V.queryProductDefault(g.id);let h=x.convertProductWithOptionsDefault(FGSECOMAPP.productsDefaultByID[g.id],g);y.innerHTML=x.renderProductOptionWithValue(h)}}),o.addEventListener("click",async y=>{let g=y.target??document.createElement("div");if(g.closest(".bogos-select-option-custom-item")){let h=g.closest(".bogos-select-option-custom-item"),E=G.productsTemp[r][n]??{},S=d.getAttribute("data-variant-id"),{selectedVariant:C,newOptions:T}=x.handleValidVariantOption(h,S,E,o);if(t.querySelector(".bogos-bundles-button-add").disabled=!C,!C){x.handleInvalidVariantOption(E,T,o);return}d.setAttribute("data-variant-id",C.id.toString()),d.setAttribute("data-original-price",C.price.toString()),d.innerHTML=C.title;let q=m.products.find(N=>String(N.id)===n).variants.find(N=>String(C.id)===String(N.id)),L={id:C.id-0,price:q?.price-0,title:C.title.trim(),thumbnail:q?.thumbnail,discount_price:q?.discount_price-0};i(L,c)}});let b=y=>{!o.contains(y.target)&&o.classList.contains("opened")&&o.classList.remove("opened")};document.addEventListener("click",b)}),t.querySelectorAll(".bogos-bundle-item-container").forEach(o=>{o.querySelector(".bogos-bundle-item-select-button").addEventListener("click",function(){let c=o.querySelector(".bogos-bundle-variants-collapse"),n=c.querySelector(".bogos-bundle-variants-container").scrollHeight;c.classList.toggle("bogos-bundle-active-dropdown-select"),c.style.maxHeight&&c.style.maxHeight!=="0px"?(c.style.maxHeight="0px",c.style.opacity="0",c.style.overflow="hidden"):(c.style.maxHeight=n+"px",c.style.opacity="1",c.style.overflow="unset")})}),t.querySelector(".bogos-bundles-button-add").addEventListener("click",async function(){this.disabled=!0,this.classList.add("bogos-bundles-adding");let o=this.innerHTML;this.innerHTML="";let c=Object.values(a.reduce((h,E)=>{let{id:S,quantity:C}=E;return h[S]={id:S,quantity:(h[S]?.quantity||0)+C},h},{})),n=l.type,d=l.value<=0;n===f.DISCOUNT_TYPE.free_products&&l.value.forEach(h=>{let E=FGSECOMAPP.productsByID[h.id]??{};return h.variants.forEach(S=>{let C=E?.variants?.find(T=>T.id===S.id);(!C||C?.available)&&c.push({id:S.id,quantity:S.quantity,is_free:!0})})});let u=l?.discount_function===f.DISCOUNT_FUNCTION.shipping||!p.empty(_?.shipping_discount),b=!((n===f.DISCOUNT_TYPE.fixed_amount||n===f.DISCOUNT_TYPE.percentage)&&d)||n===f.DISCOUNT_TYPE.free_products||u,{ok:y,message:g}=await x.add(c,r,f.BUNDLE_TYPE.default,b);if(y)this.disabled=!1;else{let h=document.createElement("div");h.classList.add("bogos-bundle-error"),h.innerHTML=g,this.parentElement?.insertBefore(h,this)}this.innerHTML=o,this.classList.remove("bogos-bundles-adding")})})},init:async(e,s)=>{try{await G.filter(s),G.render(e),G.renderEventQuery()}catch(t){console.warn("BOGOS track: bundle core init failed",t)}}},$={tiers:{},filter:async()=>{try{let e=FGSECOMAPP.bundles?.filter(t=>t.type===f.BUNDLE_TYPE.quantity_break),{current_product:s}=FGSECOMAPP.variables.Shopify;if(!p.empty(s?.id)){let t=s?.variants?.map(r=>({variant_id:r.id,product_id:s.id,product_title:s.title,price:r.price,variant_title:r.title,handle:s.handle,vendor:s.vendor,product_type:s.type,collections:s.collections}));FGSECOMAPP.current_bundles_quantity_break=e?.filter(r=>p.findProductsMatchConditions(t,{product_narrow:r.products})?.length>0)}FGSECOMAPP.current_bundles_quantity_break=FGSECOMAPP.current_bundles_quantity_break?.filter(t=>{let{discount:r}=t,m=JSON.parse(JSON.stringify(r.map(c=>(c.discount.type===f.DISCOUNT_TYPE.fixed_amount&&(c.discount.value=p.convertMultiCurrency(c.discount.value)),c)))),a=m.map(c=>c.quantity),_={...FGSECOMAPP.variables.Shopify?.current_product},l=_.variants.filter(c=>_.variants_quantity?.[c.id]>=Math.min(...a)||c.available).map(c=>(c.quantity=_.variants_quantity[c.id],c));if(t.products?.[0]?.type===f.NARROW_TYPE.product){let c=t.products[0]?.filter_option,n=Object.values(t.products[0]?.value).map(d=>d.variants??d.variant).flat().map(d=>d.id);l=l.filter(d=>c==="include"?n.includes(d.id):!n.includes(d.id))}m.forEach(c=>{c.items_bundle=l.map(n=>{let d=n.price;return{...n,price:d?d/K:p.convertMultiCurrency(d)}})}),$.tiers[t.id]=m;let i=m.find(c=>c.pre_selected);return i?.items_bundle?.length?x.items_add_bundle[t.id]=Array(i.quantity).fill(p.convertVariantAddBundle({...i.items_bundle[0],discount:i.discount,quantity:1})):x.items_add_bundle[t.id]=[],l.length>0})}catch(e){console.warn("BOGOS track: bundle quantity break filter",e)}},refreshBundleAdd:(e,s,t)=>{let r=s.querySelectorAll(".bogos-bundle-quantity-break-variant-item-select"),m=e.length,a=r.length;e.splice(0,m),r.forEach(_=>{let l=_.value,i=_.querySelector(`[value="${l}"]`);if(!i)return;let o={id:l,thumbnail:i.getAttribute("thumbnail"),price:i.getAttribute("data-original-price")-0,title:i.textContent};if(a===1){e.push(...Array(t).fill(p.convertVariantAddBundle(o)));return}e.push(p.convertVariantAddBundle(o))})},renderQuantityBreakItem:(e,s,t)=>{let r=FGSECOMAPP.fgAppearance?.quantity_break?.content??FGSECOMAPP.fgAppearance?.volume_discount?.content??{},{select_variant_text:m}=r,_=$.tiers[t].find(o=>o.id===e.id).items_bundle,l=_?.length===1,i=_?.[0]??{};return FGSECOMAPP.helper.templateHTML.render(s,{quantity_break_tier_id:`${t}_${e.id}`,quantity_break_tier_title:P.convertIntegration(e.title,`quantity_break.${t}.tiers.title_${e.id}`,`quantity_break.${t}.tiers.${e.id}.title`),quantity_break_tier_sub_title:P.convertIntegration(e.sub_title??"",`quantity_break.${t}.tiers.sub_title_${e.id}`,`quantity_break.${t}.tiers.${e.id}.sub_title`),quantity_break_tier_label:P.convertIntegration(e.label??"",`quantity_break.${t}.tiers.label_${e.id}`,`quantity_break.${t}.tiers.${e.id}.label`),quantity_break_tier_tag:P.convertIntegration(e.tag??"",`quantity_break.${t}.tiers.tag_${e.id}`,`quantity_break.${t}.tiers.${e.id}.tag`),quantity_break_tier_original:e.discount.value!==0?p.renderPrice((i?.price??0)*e.quantity):"",quantity_break_select_variant:l?"":P.convertIntegration(m??"Select variant","customize.quantity_break_select_variant","customize.quantity_break.select_variant_text"),quantity_break_tier_discount:p.renderPrice(x.calculateDiscountPrice(e.discount,(i?.price??0)*e.quantity,"total")),bogos_bundle_quantity_break_section_variants:$.renderBundleOptions(_??[],e.quantity)})},renderBundles:()=>{let e=document.querySelector(A.QUANTITY_BREAK_SECTION_FRAME_ID)?.innerHTML??A.QUANTITY_BREAK_SECTION_FRAME,s=document.querySelector(A.QUANTITY_BREAK_SECTION_ITEM_ID)?.innerHTML??A.QUANTITY_BREAK_SECTION_ITEM,t=document.querySelector(A.QUANTITY_BREAK_SECTION_FOOTER_ID)?.innerHTML??A.QUANTITY_BREAK_SECTION_FOOTER;return FGSECOMAPP.current_bundles_quantity_break?.map(r=>{let m=FGSECOMAPP.fgAppearance?.volume_discount??FGSECOMAPP.fgAppearance?.quantity_break,{button_text:a,total_price_text:_}=m?.content??{},l=m?.default?.show_description??m?.content?.show_description??!0,i=r.discount?.map(c=>$.renderQuantityBreakItem(c,s,r.id)).join(` 
`),o=FGSECOMAPP.helper.templateHTML.render(t,{quantity_break_total_price_text:P.convertIntegration(_??"Total price","customize.quantity_break_total_price","customize.quantity_break.total_price_text",!0)+":",quantity_break_total_price_discount:p.renderPrice(0),quantity_break_total_price_origin:p.renderPrice(0),quantity_break_add_button:P.convertIntegration(a??"Add bundle to cart","customize.quantity_break_add_to_cart","customize.quantity_break.button_text"),bundle:r});return FGSECOMAPP.helper.templateHTML.render(e,{bogos_bundle_id:r.id,bogos_quantity_break_block_title:P.convertIntegration(r.sub_title??"",`quantity_break.header_${r.id}`,`quantity_break.${r.id}.sub_title`),bogos_quantity_break_description:l?P.convertIntegration(r.description,`quantity_break.quantity_break_description_${r.id}`,`quantity_break.${r.id}.description`):"",bogos_quantity_break_section_items:i,bogos_quantity_break_footer:`${o} ${et.BRAND_MARK_TEMPLATE("bogos-bundles-brand-mark")}`,bundle:r})}).join(" ")},renderBundleOptions:(e,s)=>{let t=document.querySelector(A.QUANTITY_BREAK_SECTION_VARIANT_ID)?.innerHTML??A.QUANTITY_BREAK_SECTION_VARIANT,r=FGSECOMAPP.fgAppearance?.quantity_break?.content??FGSECOMAPP.fgAppearance?.volume_discount?.content??{},{item_index_text:m}=r,_=e.length===1?[s-1]:Array.from({length:s},(o,c)=>c),l=`<option value="{{ bundle_quantity_break_variant_id }}" data-original-price="{{ bundle_quantity_break_variant_original_price }}">
                        {{ bundle_quantity_break_variant_title }}
                    </option>`,i=e.map(o=>FGSECOMAPP.helper.templateHTML.render(l,{bundle_quantity_break_variant_id:o.id,bundle_quantity_break_variant_title:o.title,bundle_quantity_break_variant_original_price:o.price,variant:o})).join(" ");return _.map(o=>FGSECOMAPP.helper.templateHTML.render(t,{bogos_bundle_quantity_break_option_index:P.convertIntegration(m??"Item","customize.bundle_item_index","customize.quantity_break.item_text",!0)+` ${o+1}:`,bogos_bundle_quantity_break_option_variants:i})).join(" ")},render:e=>{let s=document.querySelector("#bogos-bundle-quantity-break-preview-mode"),t=!FGSECOMAPP.current_bundles_quantity_break?.length,{product_form_query:r}=FGSECOMAPP.QUERY_SELECTOR??{},m=document.querySelectorAll(r?.quantity_break?.join(","));if(t&&m.forEach(i=>i.innerHTML=""),s&&t){x.renderEmpty(s);return}else if(t)return;console.info("BOGOS track: bundle quantity break core",e);let a=$.renderBundles();if(!p.empty(m))m.forEach(i=>{i.innerHTML=a});else{let i=[...r?.integration,...r?.default].filter(Boolean).join(",");m=document.querySelector(i);let o=document.createElement("div");o.id="bogos-bundle-quantity-break-view",o.innerHTML=a,m?.appendChild(o)}let{quantity_break:_,default:l}=f.BUNDLE_TYPE;p.empty(m)||J.sessionViews(FGSECOMAPP.current_bundles_quantity_break,_,l).then(),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_QTY_BREAK_RENDER,{detail:{bundles:FGSECOMAPP.current_bundles_quantity_break,addFunction:(i,o)=>x.add(i,o,_)}}))},renderEventQuery:()=>{let e=FGSECOMAPP.QUERY_SELECTOR?.product_form_query?.quantity_break?.filter(Boolean)?.map(t=>`${t} .bogos-bundles-quantity-break-widget`)?.join(",");if(p.empty(e))return;let{button_text:s}=FGSECOMAPP.fgAppearance?.quantity_break?.content??{};document.querySelectorAll(e).forEach(t=>{let r=t.getAttribute("data-bundle-id"),m=FGSECOMAPP.current_bundles_quantity_break?.find(o=>o.id?.toString()===r);if(p.empty(r)||p.empty(m))return;let a=x.items_add_bundle?.[r],_=t.querySelectorAll(".bogos-quantity-break-tier-input"),l=[];_.forEach(o=>{l.push(o.getAttribute("id"))});let i=m.discount.find(o=>o.pre_selected);if(i){let o=`${r}_${i.id}`;t.querySelector(`#bogos_quantity_tier_${o}`).checked=!0;let c=t.querySelector(`[data-bogos-tier-id="${o}"]`),n=c.querySelector(".bogos-bundle-quantity-break-item-discount-price").textContent,d=c.querySelector(".bogos-bundle-quantity-break-item-original-price").textContent;t.querySelector(".bogos-bundles-quantity-break-discount-price").innerHTML=`${n}`,t.querySelector(".bogos-bundles-quantity-break-origin-price").innerHTML=`${d}`;let u=P.convertIntegration(s??"Add bundle to cart","customize.quantity_break_add_to_cart","customize.quantity_break.button_text",!0),b=P.convertIntegration(i.label,`quantity_break.tiers.label_${i.id}`,`quantity_break.${m.id}.tiers.${i.id}.label`,!0);t.querySelector(".bogos-bundles-quantity-break-button-add").innerHTML=`${u} ${i.label?"("+b+")":""}`}l.forEach(o=>{let c=o.replace("bogos_quantity_tier_",""),n=m.discount.find(u=>`${r}_${u.id}`===c),d=t.querySelector(`.bogos-bundle-quantity-break_item-container:has([data-bogos-tier-id="${c}"])`);t.querySelector(`#${o}`).addEventListener("click",()=>{let u=t.querySelector(`[data-bogos-tier-id="${c}"]`),b=u.querySelector(".bogos-bundle-quantity-break-item-discount-price").textContent,y=u.querySelector(".bogos-bundle-quantity-break-item-original-price").textContent;t.querySelector(".bogos-bundles-quantity-break-discount-price").innerHTML=`${b}`,t.querySelector(".bogos-bundles-quantity-break-origin-price").innerHTML=`${y}`,t.querySelector(`#${o}`).focus(),t.querySelector(`#${o}`).checked=!0;let g=P.convertIntegration(s??"Add bundle to cart","customize.quantity_break_add_to_cart","customize.quantity_break.button_text",!0),h=P.convertIntegration(n.label,`quantity_break.tiers.label_${n.id}`,`quantity_break.${m.id}.tiers.${n.id}.label`,!0);t.querySelector(".bogos-bundles-quantity-break-button-add").innerHTML=`${g} ${n.label?"("+h+")":""}`,$.refreshBundleAdd(a,d,n.quantity),t.querySelector(".bogos-bundles-quantity-break-button-add").disabled=!1;let E=t.querySelector(".bogos-bundle-error");E&&E.parentNode.removeChild(E)}),d.querySelectorAll(".bogos-bundle-quantity-break-variant-item-select").forEach((u,b)=>{u.addEventListener("change",y=>{let g={id:(y.target??{value:"0"})?.value-0},h=u.querySelector(`[value="${g.id}"]`);if(g={...g,price:h.getAttribute("data-original-price")-0,title:h.textContent,quantity:1},n.quantity!==a?.length)$.refreshBundleAdd(a,d,n.quantity);else{let M=a?.[b];!p.empty(M)&&(a[b]=p.convertVariantAddBundle({...a[b],...g}))}let E=a.reduce((M,q)=>M+q.price,0),S=t.querySelector(`#${o}`).checked,C=[{query:".bogos-bundles-quantity-break-discount-price",price:x.calculateDiscountPrice(n.discount,E,"total"),isTotal:!0},{query:".bogos-bundles-quantity-break-origin-price",price:E,isTotal:!0,disable:!n.discount.value},{query:`.bogos-bundle-quantity-break_item-container:has([value="${g.id}"]) .bogos-bundle-quantity-break-item-discount-price`,price:x.calculateDiscountPrice(n.discount,E,"total")},{query:`.bogos-bundle-quantity-break_item-container:has([value="${g.id}"]) .bogos-bundle-quantity-break-item-original-price`,price:E,disable:n.discount.value===0}];t.querySelector(".bogos-bundles-quantity-break-button-add").disabled=!1;let T=t.querySelector(".bogos-bundle-error");T&&T.parentNode.removeChild(T),C.forEach(M=>{if(!M.disable){if(M.isTotal&&S){t.querySelector(M.query)&&(t.querySelector(M.query).innerHTML=p.renderPrice(M.price));return}d.querySelector(M.query)&&(d.querySelector(M.query).innerHTML=p.renderPrice(M.price))}})})})}),t.querySelectorAll(".bogos-bundle-quantity-break_item-container").forEach(o=>{o.querySelector(".bogos-bundle-quantity-break-item-select-button").addEventListener("click",function(){let c=o.querySelector(".bogos-bundle-quantity-break-variants-collapse"),n=c.querySelector(".bogos-bundle-quantity-break-variants-container").scrollHeight;c.classList.toggle("bogos-bundle-quantity-break-active-dropdown-select"),c.style.maxHeight&&c.style.maxHeight!=="0px"?c.style.maxHeight="0px":c.style.maxHeight=n+"px"})}),t.querySelector(".bogos-bundles-quantity-break-button-add").addEventListener("click",async function(){this.disabled=!0,this.classList.add("bogos-bundles-adding");let o=this.innerHTML;this.innerHTML="";let c=Object.values(a.reduce((n,d)=>{let{id:u,quantity:b}=d;return n[u]={id:u,quantity:(n[u]?.quantity||0)+b},n},{}));if(c.length){let{ok:n,message:d}=await x.add(c,r,f.BUNDLE_TYPE.quantity_break);if(n)this.disabled=!1;else{let u=document.createElement("div");u.classList.add("bogos-bundle-error"),u.innerHTML=d,this.parentElement?.insertBefore(u,this)}}else{let n=document.createElement("div");n.classList.add("bogos-bundle-quantity-break-custom-error"),n.innerHTML="Please select one option",this.parentElement?.insertBefore(n,this)}this.innerHTML=o,this.classList.remove("bogos-bundles-adding")})})},init:async(e,s)=>{try{await $.filter(s),$.render(e),$.renderEventQuery()}catch(t){console.warn("BOGOS track: bundle quantity break core init failed",t)}}},v={offset_popup:0,trackCollection:{},product_chosen:{},is_loading_popup:!1,free_products:{},productsTemp:{},transformProductFromCollection:e=>{let s=Object.keys(v.trackCollection).filter(t=>e.includes(parseInt(t))).map(t=>v.trackCollection[t].data).flat();return p.getUniqueElementByKey(s,"id")},checkEveryHasNoPage:e=>{let s=v.trackCollection;return Object.keys(s).filter(t=>e.includes(t)).every(t=>!s[t]?.meta_data?.hasNextPage)},checkFirstHasNextPage:e=>{let s=v.trackCollection;return Object.keys(s).filter(t=>e.includes(t)).find(t=>s[t]?.meta_data?.hasNextPage)},getCollectionIdsPerMix:(e,s)=>e?.selected?.type===f.NARROW_TYPE.product||s?.selected?.type===f.NARROW_TYPE.product?[]:e?.mix_type===f.MIX_TYPE.single?e?.selected?.value:s?.selected?.value,getTypeMix:()=>{let s=document.querySelector("#bogos-mix-match-main-collection-popup-container").getAttribute("bogos_mix_id").split("_"),t=s[1],r=s[0],m=s[2],a=FGSECOMAPP.current_bundles_mix_match.find(o=>o?.id?.toString()===r),l=(a?.mix_items??[]).find(o=>o?.id?.toString()===t),i=v.getCollectionIdsPerMix(a,l);return{bundle_id:r,mix_id:t,mix_key:m,type_mix:a?.mix_type===f.MIX_TYPE.single?a?.selected?.type:l?.selected?.type,collection_ids:i}},eventClosePopUp:e=>{document.querySelector(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn.nav.right-nav").classList.remove("bogos-disabled"),document.querySelector(`${e}`).classList.remove("sca-is-visible-fg");let s=document.querySelector("#bogos-mix-match-main-collection-popup-container");s.removeAttribute("bogos_mix_id"),s.removeAttribute("data-choose-type"),s.innerHTML="",FGSECOMAPP.variables.productsChooseInCollections=[],v.offset_popup=0,v.trackCollection={}},eventQueryPopup:(e={})=>{document.querySelector(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn.nav.right-nav")?.addEventListener("click",async()=>{let r=document.querySelector(".bogos-mix-match-collection-popup-container");if(!r)return;r.querySelector(".bogos-collection-body-btn.nav.left-nav").classList.remove("bogos-disabled");let a=v.getTypeMix().type_mix,_=v.getTypeMix().collection_ids,l=p.getDefaultItemToShowPopupChooseProducts(),i=v.trackCollection,o=v.checkEveryHasNoPage(_),c=v.offset_popup+l,n=FGSECOMAPP.variables?.productsChooseInCollections.slice(c,c+l).length;if(n===l||o&&n){v.offset_popup=c,v.renderPopupCollection(!0,{id:e.id,product_id:v.product_chosen[e.id]?.id});return}if(r.classList.add("bogos-loading"),a==="variants_ids")return;let u=[],b=!1;for(;!b;){let y=v.checkFirstHasNextPage(_);if(!y){r.classList.remove("bogos-loading");break}let{endCursor:g}=i[y]?.meta_data??{};v.trackCollection[y]=await V.queryProductsInCollection(y,l,g);let h=FGSECOMAPP.variables.productsChooseInCollections,E=[parseInt(y)];if(u.push(...p.getUniqueElementByKey([...h,...v.transformProductFromCollection(E)],"id")),b=u.slice(c,c+l).length===l||o,u){let C=u.map(T=>T.id);try{P.syncStarRating([...new Set(C)]).then()}catch{}}}FGSECOMAPP.variables.productsChooseInCollections=p.getUniqueElementByKey([...FGSECOMAPP.variables.productsChooseInCollections,...u],"id"),FGSECOMAPP.variables?.productsChooseInCollections.slice(c,c+l).length&&(v.offset_popup+=l),v.renderPopupCollection(!0,{id:e.id,product_id:v.product_chosen[e.id]?.id}),r.classList.remove("bogos-loading")}),document.querySelector(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn.nav.left-nav")?.addEventListener("click",()=>{document.querySelector(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn.nav.right-nav").classList.remove("bogos-disabled"),v.offset_popup&&(v.offset_popup-=p.getDefaultItemToShowPopupChooseProducts(),v.renderPopupCollection(!0,{id:e.id,product_id:v.product_chosen[e.id]?.id}))});let s="#bogos-mix-match-main-collection-popup-container.sca-modal-fg.sca-is-visible-fg",t=".bogos-mix-match-collection-popup-off";document.addEventListener("click",r=>{(r.target===document.querySelector(`${s}`)||r.target===document.querySelector(`${t}`))&&v.eventClosePopUp(s)})},eventChooseProductPopup:(e={})=>{let{type:s="variant"}=FGSECOMAPP.fgAppearance?.select_variant??{},t=(n,d)=>{let u={[f.APP_REVIEW.judgeme]:{settings:FGSECOMAPP.fgIntegration?.judgeme??{},classContainer:"bogos-judgeme-integration-review-widget",render:P.renderStarRatingJudgeme},[f.APP_REVIEW.trustoo]:{settings:FGSECOMAPP.fgIntegration?.trustoo??{},classContainer:"bogos-trustoo-integration-review-widget",render:P.renderStarRatingTrustoo??(()=>{})}};Object.keys(u).forEach(b=>{let y=u[b]?.settings??{},{display_star_rating:g,bundle:h,status:E}=y?.settings??{};if((E&&g&&h)??!1){let C=p.convertStringToObj(localStorage.getItem(FGSECOMAPP.variables.constants?.[`bogos_${b}_ratings`])??""),{rating:T}=(C??[]).find(({product_id:L})=>L===d.id)??{},M=u[b]?.render(T,d.id),q=n.querySelector(`.${u[b]?.classContainer}`);if(q){let L=document.createElement("div");L.innerHTML=M??`<div class="${u[b]?.classContainer}"></div>`;let N=L.firstChild;q.parentNode.replaceChild(N,q)}}})},r=(n,d,u,b)=>{let y=d.variants.find(g=>g.id?.toString()===u);n.querySelector(".bogos-mix-item-img").src=p.handleResizeGiftImage(y?.thumbnail??d?.thumbnail??"",!0),n.querySelector(".bogos-mix-item-title").innerText=d.title,n.querySelector(".bogos-mix-item-title").href=p.routePath(`/products/${d.handle}`),d.variants.length===1&&p.checkIsDefaultTitle(d.variants[0].title)?(n.querySelector(".bogos-mix-item-variant-title").classList.add("sca-d-none"),n.querySelector(".bogos-mix-item-select-variant-wrapper").classList.add("sca-d-none")):(n.querySelector(".bogos-mix-item-select-variant-options").innerHTML=v.renderProductOptions(d,d?.thumbnail??"",{available:b?null:1,bundleId:`${o}_${i}`}),n.querySelector(".bogos-mix-item-variant-title").classList.remove("sca-d-none"),n.querySelector(".bogos-mix-item-select-variant-wrapper").classList.remove("sca-d-none")),n.querySelector(".bogos-mix-item-select-variant-title").textContent=y.title,n.querySelector(".bogos-mix-item-select-variant-title")?.setAttribute("data-variant-id",u),t(n,d)},m=document.querySelector("#bogos-mix-match-main-collection-popup-container"),a=m.getAttribute("bogos_mix_id"),_=m.getAttribute("data-choose-type")==="product",l=a.split("_"),i=l[1],o=l[0],c=l[2];document.querySelectorAll(".bogos-mix-match-collection-product").forEach(n=>{let d=n.getAttribute("data-bogos-product-id"),u=".bogos-mix-match-collection-product-detail",b="bogos-active";!p.empty(e)&&e.product_id===parseInt(d)&&n.querySelector(u).classList.add(b);let y=document.querySelector(`.bogos-mix-match-widget[data-mix-match-id="${o}"] .bogos-mix-item-container[data-mix-id="${i}"]${c?`[data-mix-key="${c}"]`:""}`);n.querySelector(u).classList.value.includes("bogos-active")&&n.querySelector(`${u} .bogos-select .bogos-mix-item-select-variant-title`).setAttribute("data-variant-id",y.querySelector(".bogos-mix-item-select-variant-title").getAttribute("data-variant-id")),n.querySelectorAll(".bogos-select .bogos-mix-item-select-variant-wrapper:has(.bogos-mix-item-select-variant-option)").forEach(g=>{let h=g.querySelector(".bogos-mix-item-select-variant-dropdown");g.addEventListener("click",()=>{h.classList.toggle("opened")}),g.querySelectorAll(".bogos-mix-item-select-variant-option").forEach(E=>{E.addEventListener("click",()=>{let S=FGSECOMAPP.variables.productsChooseInCollections.find(M=>M.id===parseInt(d));if(!S)return;let C=E.getAttribute("data-variant-id"),T=S.variants.find(M=>M.id?.toString()===C);T&&(n.querySelector(".bogos-mix-match-collection-product-img img").src=p.handleResizeGiftImage(T?.thumbnail??S?.thumbnail),g.querySelector(".bogos-mix-item-select-variant-title").textContent=E.textContent.trim(),g.querySelector(".bogos-mix-item-select-variant-title").setAttribute("data-variant-id",C))})})}),n.querySelectorAll(".bogos-select .bogos-mix-item-select-variant-wrapper:not(:has(.bogos-mix-item-select-variant-option))").forEach(g=>{let h=g.querySelector(".bogos-mix-item-select-variant-dropdown");g.addEventListener("click",async E=>{let S=E.target??document.createElement("div");if(!S.closest(".bogos-mix-item-select-variant-options")&&(h.classList.toggle("opened"),s==="option"&&!h.querySelector(".bogos-select-option-name-container"))){let C=h.querySelector(".bogos-mix-item-select-variant-title"),T=h.querySelector(".bogos-mix-item-select-variant-options");if(!FGSECOMAPP.productsDefaultByID[d]){let N=await V.queryProductDefault(d);if(p.empty(N))return}let M=C.getAttribute("data-variant-id"),q=v.productsTemp[`${o}_${i}`][d]??{},L=x.convertProductWithOptionsDefault(FGSECOMAPP.productsDefaultByID[d],q);T.innerHTML=x.renderProductOptionWithValue(L,M)}if(S.closest(".bogos-select-option-custom-item")){let C=S.closest(".bogos-select-option-custom-item"),T=FGSECOMAPP.variables.productsChooseInCollections.find(N=>N.id===parseInt(d));if(!T)return;let M=g.querySelector(".bogos-mix-item-select-variant-title").getAttribute("data-variant-id"),{selectedVariant:q,newOptions:L}=x.handleValidVariantOption(C,M,T,g);if(!q){x.handleInvalidVariantOption(T,L,g);return}n.querySelector(".bogos-mix-match-collection-product-img img").src=p.handleResizeGiftImage(q?.thumbnail??T?.thumbnail),g.querySelector(".bogos-mix-item-select-variant-title").textContent=q.title,g.querySelector(".bogos-mix-item-select-variant-title").setAttribute("data-variant-id",String(q.id))}})}),n.addEventListener("click",g=>{if(!g.target.closest(".bogos-select .bogos-mix-item-select-variant-wrapper")&&(document.querySelectorAll(u).forEach(h=>{h.classList.remove(b)}),n.querySelector(u).classList.add(b),!p.empty(e))){let h=FGSECOMAPP.variables.productsChooseInCollections.find(S=>S.id===parseInt(d));if(h){let S=v.product_chosen;v.product_chosen={...S,[e.id]:h};let C=n.querySelector(".bogos-mix-item-select-variant-title").getAttribute("data-variant-id"),T=h.variants.find(L=>L.id===parseInt(C));y.setAttribute("data-variant-id",C),y.setAttribute("data-item-original-price",T?.price?.toString()),y.setAttribute("data-product-id",h.id.toString());let q=FGSECOMAPP.productsByID?.[h.id]?.variants?.find(L=>L.id===T.id)?.available?"1":"0";y.setAttribute("data-mix-available",_?q:"1"),r(y,h,C,_),v.refreshStatesBundle(document.querySelector(`.bogos-mix-match-widget[data-mix-match-id="${o}"]${c?`[data-mix-match-key="${c}"]`:""}`))}v.eventClosePopUp("#bogos-mix-match-main-collection-popup-container.sca-modal-fg.sca-is-visible-fg")}})})},filterWithBlocks:e=>{let s=(i,o)=>{let n=(i.products?.find(b=>b.type===f.NARROW_TYPE.product)?.value??[]).some(b=>b.id===o?.id),u=(i.products?.find(b=>b.type===f.NARROW_TYPE.collection)?.value??[]).some(b=>o?.collections.some(y=>y.id.toString()===b.collection_id.toString()));return n||u},t={},r=e?FGSECOMAPP.current_bundles_mix_match:FGSECOMAPP.bundles?.filter(i=>i.type===f.BUNDLE_TYPE.mix_match),{current_product:m}=FGSECOMAPP.variables.Shopify??{},a=p.empty(m?.id)?[]:r?.filter(i=>s(i,m)),{product_form_query:_}=FGSECOMAPP.QUERY_SELECTOR??{},l=e?[e]:document.querySelectorAll(_?.mix_match?.join(","));return l.forEach(i=>{let o=Number(p.getIntShopifyId(i.getAttribute("data-product-id"))),c=Number(i.getAttribute("data-offer-id")),n=null;c&&(n=(n??r)?.filter(d=>d.id.toString()===c.toString())),o&&(n=(n??r)?.filter(d=>s(d,window.BOGOS?.block_products?.[o]??FGSECOMAPP.productsByID?.[o]??{}))),n?.forEach(d=>t[d.id]={...d,current_product:e?o:void 0}),!c&&!o&&a.forEach(d=>t[d.id]=d)}),l.length||a.forEach(i=>t[i.id]=i),Object.values(t)},filter:async e=>{try{await P?.searchProductsBlock?.("mix_match");let s=p.getDefaultItemToShowPopupChooseProducts();FGSECOMAPP.current_bundles_mix_match=v.filterWithBlocks();let t=[],r=[],a={handles:[...FGSECOMAPP.current_bundles_mix_match?.reduce((o,c)=>{let n=c.products.find(u=>u.type===f.NARROW_TYPE.product)?.value??[];o=[...o,...n.map(u=>(t.push(u.id),u.handle))];let d=c.discount.filter(u=>u.discount.type===f.DISCOUNT_TYPE.free_products);return d.length&&d.forEach(u=>{let b=u.discount.value.map(y=>y.handle);t.push(...u.discount.value.map(y=>y.id)),r.push(...b)}),[...new Set(o)]},[])??[],...new Set(r)],ids:t};if(!e&&await ot.cacheProducts(a?.handles,{"sca-mix-match-search":"1"},()=>{console.info(`BOGOS track: mix-match:sync-quantity:${Date.now()}`)},a),p.empty(FGSECOMAPP.current_bundles_mix_match))return;FGSECOMAPP.current_bundles_mix_match=FGSECOMAPP.current_bundles_mix_match.map(o=>v.convertDataMixMatch(o)),v.getCollectionsInCache();let _=async(o,c)=>{let n=!1,d;for(let u=0;u<o.length;u++){if(!p.empty(v.trackCollection[o[u]])){n=!0,d=o[u];break}let b=await V.queryProductsInCollection(o[u],c);if(!p.empty(b.data)){v.trackCollection[o[u]]=b,t.push(...b.data.map(y=>y.id)),n=!0;break}}return{isHasData:n,collectionIdNeedUpdateCache:d}},l=[],i=[];for(let o of FGSECOMAPP.current_bundles_mix_match){if(o.mix_type===f.MIX_TYPE.single&&o.selected.type===f.NARROW_TYPE.collection){let{isHasData:c,collectionIdNeedUpdateCache:n}=await _(o.selected.value,s);p.empty(n)||l.push(n),c||i.push(o.id);continue}if(o.mix_type===f.MIX_TYPE.diff)for(let c of o.mix_items){let{selected:n}=c;if(n.type!==f.NARROW_TYPE.collection)continue;let{isHasData:d,collectionIdNeedUpdateCache:u}=await _(n.value,s);if(p.empty(u)||l.push(u),!d){i.push(o.id);break}}}i.length&&(FGSECOMAPP.current_bundles_mix_match=FGSECOMAPP.current_bundles_mix_match.filter(o=>i.includes(o.id))),v.cacheCollections(l,s).then();try{P.syncStarRating([...new Set(t)]).then()}catch{}}catch(s){console.warn("BOGOS track: mix match filter",s)}},cacheCollections:async(e,s)=>{if(p.empty(v.trackCollection))return;let t={data:{},time:0};try{t=p.convertStringToObj(localStorage.getItem("bogos_collections_info"))}catch{}let r=[...new Set(e)];for(let m of r){let a=await V.queryProductsInCollection(m,s);p.empty(a.data)||(t.data[m]=a)}localStorage.setItem("bogos_collections_info",p.convertObjToString({data:{...v.trackCollection??{},...t.data},time:Date.now()})),console.info(`BOGOS track: mix-match:cache collection: ${Date.now()}`)},getCollectionsInCache:()=>{let e={data:{},time:0};try{e=p.convertStringToObj(localStorage.getItem("bogos_collections_info"))}catch{}Date.now()-e.time<300*1e3&&(v.trackCollection=e.data)},renderProductOptions:(e,s,t)=>{let{available:r,bundleId:m}=t??{},a=x.convertProductWithOptions(e),_=FGSECOMAPP.productsByID?.[a.id],{type:l="variant"}=FGSECOMAPP.fgAppearance?.select_variant??{};if(l==="variant"){let i=`<div class="bogos-mix-item-select-variant-option" data-img="{{ bundle_variant_img }}" data-variant-id="{{ bundle_variant_id }}" data-original-price="{{ bundle_variant_original_price }}" data-option-available="{{ bogos_variant_available }}"">
                       {{ bundle_variant_title }}
                    </div>`;return a.variants.map(o=>FGSECOMAPP.helper.templateHTML.render(i,{bundle_variant_img:p.handleResizeGiftImage(o.thumbnail??s,!0),bundle_variant_id:o.id,bundle_variant_original_price:o.price,bundle_variant_title:o.title,bogos_variant_available:r??(a?.variants?.find(c=>c.id===o.id)?.availableForSale??_?.variants?.find(c=>c.id===o.id)?.available?1:0)})).join("")}else return v.productsTemp[m]={...v.productsTemp[m]??{}},v.productsTemp[m][a.id]=a,V.queryProductDefault(a.id).then(),'<div class="bogos-loading-spinner"></div>'},renderTextChooseProduct:(e,s)=>{let{select_product_text:t,select_collection_text:r}=FGSECOMAPP.fgAppearance?.mix_match?.content??{};return FGSECOMAPP.helper.templateHTML.render(e?P.convertIntegration(t??"Choose from {{number}} product(s)","customize.mix_match_select_product_text","customize.mix_match.select_product_text"):P.convertIntegration(r??"Choose from {{number}} collection(s)","customize.mix_match_select_collection_text","customize.mix_match.select_collection_text"),{number:s.length})},renderMixItem:(e,s,t)=>{let{selected:r,isSingleSet:m,bundleId:a,templateItem:_,currentProduct:l,bundleKey:i}=t??{},{mix_item_header:o,select_variant_title:c,out_stock_text:n}=FGSECOMAPP.fgAppearance?.mix_match?.content??{},d=r.value,u=r.type===f.NARROW_TYPE.product;if(!p.empty(l?.id)&&u){let T=d.findIndex(M=>M.id===l.id);d=v.moveItemToFront(d,T)}let b,y=v.product_chosen[`${a}_${e.id}`];if(y)b=y;else if(u)b=m?d[s]??d[d.length-1]:d[0];else if(s===0)b={id:l.id,title:l.title,handle:l.handle,thumbnail:l.featured_image,options:l?.options??[],variants:l.variants.map(T=>({id:T.id,price:T.price/K,title:T.title,thumbnail:T?.featured_image?.src,availableForSale:T.available,options:T?.options??[]}))};else{let T=d.find(M=>v.trackCollection[M]);b=v.trackCollection[T]?.data[0]}let g=v.product_chosen;v.product_chosen={...g,[`${a}_${e.id}`]:b};let h=b?.variants?.length===1&&p.checkIsDefaultTitle(b.variants[0].title),E=FGSECOMAPP.productsByID?.[b.id],S=x.renderAppReviewEl(b.id),C=x.renderAppReviewEl(b.id,f.APP_REVIEW.trustoo);return FGSECOMAPP.helper.templateHTML.render(_,{bogos_mix_item_header_title:FGSECOMAPP.helper.templateHTML.render(P.convertIntegration(o??"Mix item {{itemIndex}}","customize.mix_match_item_header","customize.mix_match.mix_item_header"),{itemIndex:s+1}),bogos_mix_item_choose_product_btn:v.renderTextChooseProduct(u,d),bogos_mix_item_img:p.handleResizeGiftImage(b.variants[0]?.thumbnail??b.thumbnail,!0),bogos_mix_item_title:b.title,bogos_mix_item_variant_prefix:P.convertIntegration(c??"Variant","customize.mix_match_select_variant_title","customize.mix_match.select_variant_title",!0)+":",bogos_mix_item_select_variant_section:v.renderProductOptions(b,b.thumbnail,{bundleId:`${a}_${e.id}`}),bogos_variant_title:b.variants[0]?.title,bogos_mix_item_discount_price:0,bogos_mix_item_original_price:b.variants[0].price,bogos_mix_item_secondary:s>0?"bogos-mix-item-secondary":"",check_show_mix_item_select:h?"sca-d-none":"",check_show_btn_choose_product:d.length<=(u?1:0)?"sca-d-none":"",bogos_mix_item_handle:p.routePath(`products/${b.handle}`),bogos_mix_item_id:e.id,bogos_mix_match_id:a,bogos_mix_item_key:i,bogos_mix_min_quantity:e.min_quantity,bogos_mix_item_variant_id:b.variants[0].id,bogos_product_id:b.id,bogos_mix_item_variant_quantity:e.min_quantity,bogos_mix_item_checked:"1",bogos_mix_id:e.id,bogos_mix_key:i,bogos_mix_item_available:b?.variants[0]?.availableForSale??E?.variants?.find(T=>T.id===b.variants[0].id)?.available?1:0,bogos_mix_item_out_of_stock:P.convertIntegration(n??"Out of stock!","customize.mix_match_out_stock_text","customize.mix_match.out_stock_text"),bogos_integration_judgeme:S,bogos_integration_trustoo:C})},renderBundles:e=>{let s=document.querySelector(A.MIX_MATCH_SECTION_FRAME_ID)?.innerHTML??A.MIX_MATCH_SECTION_FRAME,t=document.querySelector(A.MIX_MATCH_SECTION_ITEM_ID)?.innerHTML??A.MIX_MATCH_SECTION_ITEM,r=document.querySelector(A.MIX_MATCH_SECTION_FOOTER_ID)?.innerHTML??A.MIX_MATCH_SECTION_FOOTER,m=document.querySelector(A.MIX_MATCH_BADGE_ITEM_ID)?.innerHTML??A.MIX_MATCH_BADGE_ITEM,a=document.querySelector(A.MIX_MATCH_PROGRESS_ITEM_ID)?.innerHTML??A.MIX_MATCH_PROGRESS_ITEM;return(e??FGSECOMAPP.current_bundles_mix_match)?.map(_=>{let l=`${_.id}.${Math.random().toString(36).substring(8)}`,{show_description:i,button_text:o,total_price_text:c,tier_style:n}=FGSECOMAPP.fgAppearance?.mix_match?.content??{},d=_.id,u=_.mix_type===f.MIX_TYPE.single,b=n===f.TIER_TYPE.progress,{block_products:y,current_product:g}=FGSECOMAPP.variables?.Shopify??{},h=y?.[_.current_product]??FGSECOMAPP.productsByID?.[_.current_product]??g,{id:E,collections:S}=h??{},C=_.mix_items?.sort((q,L)=>{if(u)return 0;let N=z=>{let I=S?.map(O=>`${O.id}`)??[];return z.selected.type===f.NARROW_TYPE.product&&(I=[`${E}`]),0+z.selected.value.some(O=>I.includes(`${O?.id??O}`))};return N(L)-N(q)})?.map((q,L)=>{let N=u?_.selected:q.selected;return v.renderMixItem(q,L,{selected:N,isSingleSet:u,bundleId:d,templateItem:t,currentProduct:h,bundleKey:l})}).join(" "),T=_.discount.map(q=>FGSECOMAPP.helper.templateHTML.render(b?a:m,{bogos_label_mix_match:P.convertIntegration(q.label,`mix_match.${_.id}.tiers.label_${q.id}`,`mix_match.${_.id}.tiers.${q.id}.label`),bogos_mix_match_discount_id:q.id})).join(" "),M=FGSECOMAPP.helper.templateHTML.render(r,{bogos_mix_match_total_price_text:P.convertIntegration(c??"Total bundle price","customize.mix_match_total_price","customize.mix_match.total_price_text",!0)+":",bogos_mix_match_discount_price:0,bogos_mix_match_original_price:0,bogos_mix_match_add_button:P.convertIntegration(o??"Add bundle to cart","customize.mix_match_add_to_cart","customize.mix_match.button_text"),bundle:_});return FGSECOMAPP.helper.templateHTML.render(s,{bogos_mix_match_id:_.id,bogos_mix_match_key:l,bogos_mix_match_title:P.convertIntegration(_.sub_title,`mix_match.header_${_.id}`,`mix_match.${_.id}.sub_title`),bogos_mix_match_description:i??!0?P.convertIntegration(_.description,`mix_match.mix_match_description_${_.id}`,`mix_match.${_.id}.description`):"",bogos_mix_match_items:C,bogos_mix_match_footer:`${M} ${et.BRAND_MARK_TEMPLATE("bogos-mix-match-brand-mark")}`,bogos_labels_container_class:b?"bogos-mix-match-progress-container":"bogos-mix-match-badges-container",bogos_mix_match_labels:T,bogos_check_show_line_progress:b?"":"sca-d-none",bundle:_})}).join(" ")},render:e=>{let{product_form_query:s}=FGSECOMAPP.QUERY_SELECTOR??{},t=document.querySelectorAll(s?.mix_match?.join(",")),r=!FGSECOMAPP.current_bundles_mix_match?.length,m=[];if(r||console.info("BOGOS track: mix-n-match core",e),t.forEach(i=>{let o=v.filterWithBlocks(i),c=!o.length,n=i.querySelector("#bogos-mix-match-preview-mode");if(n&&c){x.renderEmpty(n);return}else if(c)return;i.innerHTML=v.renderBundles(o),m.push(...o)}),r)return;if(!t.length){let i=v.renderBundles(),o=[...s?.integration,...s?.default].filter(Boolean).join(",");t=document.querySelector(o);let c=document.createElement("div");c.id="bogos-mix-match-view",c.innerHTML=i,t?.appendChild(c),m.push(...FGSECOMAPP.current_bundles_mix_match)}let{mix_match:a,default:_}=f.BUNDLE_TYPE;p.empty(m)||(m=Object.values(Object.assign({},...m.map(i=>({[i.id]:i})))),J.sessionViews(m,a,_).then());let l=FGSECOMAPP.QUERY_SELECTOR?.product_form_query?.mix_match?.filter(Boolean)?.map(i=>`${i} .bogos-mix-match-widget`)?.join(",");p.empty(l)||(document.querySelectorAll(l).forEach(i=>{v.refreshStatesBundle(i)}),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_MIX_MATCH_RENDER,{detail:{bundles:m,addFunction:(i,o)=>x.add(i,o,a)}})))},renderEventQuery:()=>{let e=FGSECOMAPP.QUERY_SELECTOR?.product_form_query?.mix_match?.filter(Boolean)?.map(t=>`${t} .bogos-mix-match-widget`)?.join(","),{type:s="variant"}=FGSECOMAPP.fgAppearance?.select_variant??{};p.empty(e)||document.querySelectorAll(e).forEach(t=>{let r=t.getAttribute("data-mix-match-id"),m=FGSECOMAPP.current_bundles_mix_match.find(a=>a.id===Number(r));t.addEventListener("click",async a=>{let _=a.target??document.createElement("div");if(_.closest(".bogos-mix-item-select-variant-dropdown")||t.querySelectorAll(".bogos-mix-item-select-variant-dropdown").forEach(l=>{l.classList.remove("opened")}),_.matches(".bogos-mix-item-select-variant-option")){let l=_.closest(".bogos-mix-item-select-variant-option"),i=_.closest(".bogos-mix-item-select-variant-dropdown");i.classList.remove("opened");let o=l.getAttribute("data-variant-id"),c=l.getAttribute("data-img"),n=l.getAttribute("data-discount-price"),d=l.getAttribute("data-original-price"),u=l.getAttribute("data-option-available"),b=i.closest(".bogos-mix-item-container");b.querySelector(".bogos-mix-item-img").setAttribute("src",c),b.querySelector(".bogos-mix-item-original-price").textContent=p.renderPrice(d),b.querySelector(".bogos-mix-item-discount-price").textContent=p.renderPrice(n),i.querySelector(".bogos-mix-item-select-variant-title").textContent=l.textContent.trim(),i.querySelector(".bogos-mix-item-select-variant-title").setAttribute("data-variant-id",o),b.setAttribute("data-variant-id",o.toString()),b.setAttribute("data-item-original-price",d),b.setAttribute("data-mix-available",u),v.refreshStatesBundle(t)}if(_.closest(".bogos-mix-item-select-variant-dropdown")){let l=_.closest(".bogos-mix-item-select-variant-dropdown");if(!_.closest(".bogos-mix-item-select-variant-options")&&(l.classList.toggle("opened"),s==="option"&&!l.querySelector(".bogos-select-option-name-container"))){let i=_.closest(".bogos-mix-item-container"),o=i.getAttribute("data-mix-id"),c=_.closest(".bogos-mix-item-select-variant-title"),n=i.getAttribute("data-product-id"),d=l.querySelector(".bogos-mix-item-select-variant-options");if(!FGSECOMAPP.productsDefaultByID[n]){let g=await V.queryProductDefault(n);if(p.empty(g))return}let u=c.getAttribute("data-variant-id"),b=v.productsTemp[`${r}_${o}`][n]??{},y=x.convertProductWithOptionsDefault(FGSECOMAPP.productsDefaultByID[n],b);d.innerHTML=x.renderProductOptionWithValue(y,u)}}if(_.closest(".bogos-select-option-custom-item")){let l=_.closest(".bogos-select-option-custom-item"),i=_.closest(".bogos-mix-item-container"),o=i.getAttribute("data-product-id"),c=i.getAttribute("data-mix-id"),n=v.productsTemp[`${r}_${c}`][o]??{},d=i.getAttribute("data-variant-id"),{selectedVariant:u,newOptions:b}=x.handleValidVariantOption(l,d,n,i);if(!u){i.setAttribute("data-mix-available","0"),x.handleInvalidVariantOption(n,b,i),v.refreshStatesBundle(t);return}let y=u?.featured_image?.src??u?.thumbnail??n?.featured_image??n?.thumbnail;i.querySelector(".bogos-mix-item-img").setAttribute("src",y),i.querySelector(".bogos-mix-item-original-price").textContent=p.renderPrice(u.price),i.querySelector(".bogos-mix-item-select-variant-title").textContent=u.title,i.querySelector(".bogos-mix-item-select-variant-title").setAttribute("data-variant-id",String(u.id)),i.setAttribute("data-variant-id",u.id.toString()),i.setAttribute("data-item-original-price",u.price.toString());let g=u?.availableForSale??u?.available?"1":"0";i.setAttribute("data-mix-available",g),v.refreshStatesBundle(t)}}),t.querySelectorAll(".bogos-mix-item-container .bogos-mix-item-choose-product").forEach(a=>{a.addEventListener("click",async function(){let _=a.getAttribute("data-mix-match-id")-0,l=a.getAttribute("data-mix-item-id")-0,i=a.getAttribute("data-mix-item-key"),o=m?.mix_items.find(b=>b.id===l),n=m.mix_type===f.MIX_TYPE.single?m.selected:o.selected,d=`${_}_${l}${i?`_${i}`:""}`,u=v.product_chosen[d];if(document.querySelector("#bogos-mix-match-main-collection-popup-container").setAttribute("bogos_mix_id",d),v.is_loading_popup=!0,v.renderPopupCollection(!0,{id:d,product_id:u?.id}),n.type===f.NARROW_TYPE.product)FGSECOMAPP.variables.productsChooseInCollections=p.getUniqueElementByKey(n.value,"id"),document.querySelector("#bogos-mix-match-main-collection-popup-container").setAttribute("data-choose-type","product");else{let b=n.value.map(E=>parseInt(E));b.forEach(E=>{v.trackCollection[E]={}});let y=[],g=p.getDefaultItemToShowPopupChooseProducts(),h=0;for(let E of b){let S=await V.queryProductsInCollection(E,g);if(h+=S.data.length,h>g&&S.data.length>g)break;v.trackCollection[E]=S,y.push(E)}FGSECOMAPP.variables.productsChooseInCollections=v.transformProductFromCollection(y),document.querySelector("#bogos-mix-match-main-collection-popup-container").setAttribute("data-choose-type","collection")}v.is_loading_popup=!1,v.renderPopupCollection(!0,{id:d,product_id:u?.id})})}),t.querySelectorAll(".bogos-mix-item-container .bogos-mix-match-quantity").forEach(a=>{let _=a.querySelector(".bogos-minus-mix-btn"),l=a.querySelector(".bogos-plus-mix-btn"),i=a.querySelector(".bogos-mix-match-quantity-input"),o=a.parentElement.parentElement.parentElement.parentElement.parentElement,c=()=>{let n=parseInt(i.value);_.disabled=n<=1,o.setAttribute("data-quantity-variant",n.toString()),v.refreshStatesBundle(t)};c(),_.addEventListener("click",()=>{let n=parseInt(i.value);i.value=n-1,c()}),l.addEventListener("click",()=>{let n=parseInt(i.value);i.value=n+1,c()}),i.addEventListener("change",()=>{let n=parseInt(i.value);i.value=isNaN(n)||n<1?1:n,c()})}),t.querySelectorAll(".bogos-mix-item-container .bogos-mix-item-checkbox").forEach(a=>{a.addEventListener("click",function(){a.parentElement.parentElement.parentElement.setAttribute("data-check-item",this.checked?"1":"0"),v.refreshStatesBundle(t)})}),t.querySelector(".bogos-mix-match-button-add").addEventListener("click",async function(){this.disabled=!0,this.classList.add("bogos-bundles-adding");let a=this.innerHTML;this.innerHTML="";let _=[];t.querySelectorAll(".bogos-mix-item-container").forEach(u=>{u.getAttribute("data-check-item")==="1"&&_.push({id:parseInt(u.getAttribute("data-variant-id")),quantity:parseInt(u.getAttribute("data-quantity-variant")),bogos_mix_id:parseInt(u.getAttribute("data-mix-id"))})});let l=v.free_products[`offer_${r}`];p.empty(l)||l.forEach(u=>{let b=FGSECOMAPP.productsByID[u.id];u.variants.forEach(y=>{let g=b.variants.find(h=>h.id===y.id);(!g||g?.available)&&_.push({id:parseInt(y.id),quantity:parseInt(y.quantity??"1"),bogos_mix_id:null})})});let i=t.querySelector(".bogos-mix-match-total-original-price"),o=t.querySelector(".bogos-mix-match-shipping-discount-container"),c=!p.empty(i?.innerHTML)||!p.empty(o?.innerHTML),{ok:n,message:d}=await x.add(_,r,f.BUNDLE_TYPE.mix_match,c);if(n)this.disabled=!1;else{let u=document.createElement("div");u.classList.add("bogos-bundle-error"),u.innerHTML=d,this.parentElement?.insertBefore(u,this)}this.innerHTML=a,this.classList.remove("bogos-bundles-adding")})})},transformSelectedDataToMixItem:e=>{let s={};return e.forEach(t=>{if(t.type===f.NARROW_TYPE.product){t.value.forEach(r=>{r.variants.forEach(m=>{m.mix_item_ids.forEach(a=>{let _=s[a]??{},l=_?.value?.[r.id]??{};s[a]={type:t?.type,value:{..._.value??{},[r.id]:{...r,variants:[...l?.variants??[],{...m,price:p.convertMultiCurrency(m.price)}]}}}})})});for(let r in s)s[r].value=x.handleTransformProductData(Object.values(s[r].value??{}))}else t.value.forEach(r=>{r.mix_item_ids.forEach(m=>{s[m]={type:t.type,value:[...new Set([...s[m]?.value??[],r.collection_id])]}})})}),s},moveItemToFront:(e,s)=>s>=0&&s<e.length?[e[s]].concat(e.slice(0,s),e.slice(s+1)):e,convertDataMixMatch:e=>{let s=e?.products?.find(i=>i?.type===f.NARROW_TYPE.config),t=s?.value?.mix_type,r=t===f.MIX_TYPE.single,m=e?.products?.filter(i=>i?.type!==f.NARROW_TYPE.config),a=v.transformSelectedDataToMixItem(m),_=s?.value?.mix_items?.map(i=>({id:i.id,set_min:i.min_quantity!==0,min_quantity:i.min_quantity!==0?i.min_quantity:1,selected:r?{}:a[i.id]})),l=i=>i.map(o=>({...o,variants:o.variants.map(c=>({...c,price:p.convertMultiCurrency(c.price)}))}));return{...e,discount:e.discount?.map(i=>(x.convertDiscountMarket(i.discount),x.convertDiscountMarket(i.shipping_discount),i))??[],checked:_.map(i=>i.id),mix_type:t,selected:r?{type:e?.products[0]?.type,value:e?.products[0]?.type===f.NARROW_TYPE.product?x.handleTransformProductData(l(e?.products[0].value)):e?.products[0]?.value?.map(i=>i.collection_id)}:{},mix_items:_}},renderPopupCollection:(e=!0,s={})=>{if(!e)return;let t=FGSECOMAPP.variables.productsChooseInCollections,r=v.offset_popup,m=p.getDefaultItemToShowPopupChooseProducts(),{select_variant_title:a}=FGSECOMAPP.fgAppearance?.mix_match?.content??{},{mix_match_collection_popup_query:_}=FGSECOMAPP.QUERY_SELECTOR??{},l=[..._?.default].filter(Boolean).join(","),i=document.querySelector(l);if(!i)return;let o=document.querySelector(A.MIX_MATCH_COLLECTION_POPUP_ITEM_ID)?.innerHTML??A.MIX_MATCH_COLLECTION_POPUP_ITEM,c=document.querySelector(A.MIX_MATCH_COLLECTION_VARIANTS_SELECT_ID)?.innerHTML??A.MIX_MATCH_COLLECTION_VARIANTS_SELECT_ITEM,n=t.slice(r,r+m),d=v.getTypeMix(),{bundle_id:u,mix_id:b,mix_key:y}=d,g=FGSECOMAPP.current_bundles_mix_match?.find(O=>O.id.toString()===u),h=g.mix_type!==f.MIX_TYPE.single?g?.mix_items?.find(O=>O.id?.toString()===b)?.selected?.value??[]:g.selected?.value??[],E=document.querySelector(`.bogos-mix-match-widget[data-mix-match-id="${u}"] .bogos-mix-item-container[data-mix-id="${b}"]${y?`[data-mix-key="${y}"]`:""}`),S=n.map(O=>{let k=O.variants,w=k.some(B=>p.checkIsDefaultTitle(B.title)),D=FGSECOMAPP.helper.templateHTML.render(c,{bogos_mix_item_select_variant_section:v.renderProductOptions(O,O.thumbnail,{bundleId:`${u}_${b}`}),bogos_variant_title:k[0].title,bogos_variant_id:k[0].id,mix_collection_title:P.convertIntegration(a??"Variant","customize.mix_match_select_variant_title","customize.mix_match.select_variant_title",!0)+":",is_none:w?"sca-d-none":""});return FGSECOMAPP.helper.templateHTML.render(o,{bogos_product_id:O.id,mix_collection_product_img:p.handleResizeGiftImage(O?.variants[0]?.thumbnail??O?.thumbnail,!1),mix_collection_product_title:O.title,mix_variants:k.length?D:""})}).join(" "),C=O=>{switch(n.length){case 1:let k=O.querySelector(".bogos-mix-match-collection-product");k.style.flex="0 0 100%",k.style.maxWidth="100%";break;case 2:O.querySelectorAll(".bogos-mix-match-collection-product").forEach(w=>{w.style.flex="0 0 50%",w.style.maxWidth="50%"});break;case 3:m===8&&O.querySelectorAll(".bogos-mix-match-collection-product").forEach(w=>{w.style.flex="0 0 33%",w.style.maxWidth="33%"});break;default:}},T=(O=!0)=>{document.querySelectorAll(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn").forEach(k=>{O?k.classList.add("sca-d-none"):k.classList.remove("sca-d-none")})},M=v.is_loading_popup,q=M?'<div class="bogos-loading-wrapper"><span class="bogos-loading-popup"></span></div>':S,L=d.type_mix,N=document.querySelector(".bogos-mix-match-collection-popup-container");if(N){document.querySelector("#bogos-mix-match-main-collection-popup-container.sca-modal-fg").classList.add("sca-is-visible-fg"),N.querySelector(".bogos-mix-match-collection-popup-body .bogos-body-container").innerHTML=q,M||T(!1),v.eventChooseProductPopup(s);let O=document.querySelector(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn.nav.left-nav"),k=document.querySelector(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn.nav.right-nav");r||O.classList.add("bogos-disabled"),t.length-r<=m&&(v.checkEveryHasNoPage(d.collection_ids)||L==="variants_ids")&&k.classList.add("bogos-disabled"),C(N);return}let z=document.querySelector(A.MIX_MATCH_COLLECTION_POPUP_ID)?.innerHTML??A.MIX_MATCH_COLLECTION_POPUP;if(i.classList?.toggle("bogos-mix-match-main-collection-popup-container",!0),i.innerHTML=FGSECOMAPP.helper.templateHTML.render(z,{collection_popup_title:v.renderTextChooseProduct(L==="variants_ids",h),collection_popup_body:q}),(t.length<=8&&v.checkEveryHasNoPage(d.collection_ids)||M)&&T(),i.querySelector(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn.nav.left-nav").classList.add("bogos-disabled"),i.classList.add("sca-is-visible-fg"),C(i),E){let O=i.querySelector(`.bogos-mix-match-collection-product[data-bogos-product-id="${s.product_id}"] .bogos-mix-item-select-variant-title`);O&&O.setAttribute("data-variant-id",E.querySelector(".bogos-mix-item-select-variant").getAttribute("data-variant-id"))}let I=document.querySelector(".bogos-mix-match-collection-popup-container .bogos-collection-body-btn.nav.right-nav");t.length-r<=m&&(!p.empty(v.trackCollection)&&v.checkEveryHasNoPage(d.collection_ids)||L==="variants_ids")&&I.classList.add("bogos-disabled"),v.eventQueryPopup(s),v.eventChooseProductPopup(s)},refreshStatesBundle:e=>{let{show_discount_on_button:s,button_text:t,total_price_text:r,show_discount_each_item:m,tier_style:a,free_price:_,free_product_title:l,out_stock_text:i}=FGSECOMAPP.fgAppearance?.mix_match?.content??{},o=a===f.TIER_TYPE.progress?".bogos-mix-match-progress-item":".bogos-mix-match-badge-item",c=e.getAttribute("data-mix-match-id"),n=0,d=0,u=0,b=!0,y=!0,g={},h=FGSECOMAPP.current_bundles_mix_match.find(I=>I.id?.toString()===c.toString());if(!h)return;e.querySelectorAll(".bogos-mix-item-container").forEach(I=>{let O=I.getAttribute("data-mix-id"),k=parseInt(I.getAttribute("data-quantity-variant")),w=I.getAttribute("data-check-item")==="1",D=parseFloat(I.getAttribute("data-item-original-price")),B=I.getAttribute("data-variant-id"),R=h.mix_items.find(F=>O.toString()===F.id.toString());R.set_min&&b&&(b=w&&k>=R.min_quantity),w&&(g[O]={[B]:{quantity:k,price:D,variantId:B}},n+=D*k,u+=k)});let S=[...h?.discount].sort((I,O)=>O.quantity-I.quantity).find(I=>u>=I.quantity),C=`offer_${c}`,T=()=>{v.free_products?.[C]&&(v.free_products[C]=[]);let I=e.querySelector(".bogos-mix-match-gift-items-container");I&&I.remove()},M=()=>{let I=e.querySelector(".bogos-mix-match-gift-items-container");if(I&&I.remove(),v.free_products?.[C].length>0){let O=document.querySelector(A.MIX_MATCH_WIDGET_GIFT_ITEMS_SECTION_ID)?.innerHTML??A.MIX_MATCH_WIDGET_GIFT_ITEMS_SECTION,k=document.querySelector(A.MIX_MATCH_WIDGET_GIFT_ITEM_SECTION_ID)?.innerHTML??A.MIX_MATCH_WIDGET_GIFT_ITEM_SECTION,w=v.free_products?.[C].map(j=>{let tt=FGSECOMAPP.productsByID[j.id]??{},rt=x.renderAppReviewEl(j.id),ct=x.renderAppReviewEl(j.id,f.APP_REVIEW.trustoo);return j.variants.map(Q=>{let Z=tt?.variants?.find(lt=>lt.id===Q.id);return FGSECOMAPP.helper.templateHTML.render(k,{bogos_product_img:Q.thumbnail??j.thumbnail,bogos_product_title:tt?.title??j.title,bogos_variant_title:p.checkIsDefaultTitle(Q.title)?"":Z?.title??Q.title,bogos_product_quantity:Q.quantity??1,bogos_product_original_price:p.renderPrice(p.convertMultiCurrency(Q.price)),bogos_product_discount_price:P.convertIntegration(_??"FREE","customize.mix_match_free_price","customize.mix_match.free_price"),bogos_out_stock_class:Z&&Z?.available?"sca-d-none":"",bogos_variant_out_stock:Z&&Z?.available?"":P.convertIntegration(i??"Out of stock!","customize.mix_match_out_stock_text","customize.mix_match.out_stock_text"),bogos_integration_judgeme:rt,bogos_integration_trustoo:ct})})}).flat(),D=FGSECOMAPP.helper.templateHTML.render(O,{bogos_gift_items_header:P.convertIntegration(l??"\u{1F381} Free Gift","customize.mix_match_free_product_title","customize.mix_match.free_product_title"),bogos_gift_items_list:w.join(" ")}),B=document.createElement("div");B.innerHTML=D;let R=B.firstElementChild,F=e.querySelector(".bogos-mix-match-widget-body");F&&F.appendChild(R);let H=115,Y=e.querySelectorAll(".bogos-mix-item-container").length,U=H*(2+Y)+40;if(!(H*(Y+w.length)>U))return;e.querySelector(".bogos-mix-match-widget-body").setAttribute("style",`max-height:${U}px;overflow-y:scroll;`),e.querySelector(".bogos-mix-match-widget-footer").classList.add("bogos-bundles-footer-box-shadow")}},q=()=>{let I=e.querySelector(".bogos-mix-match-shipping-discount-container");I&&I.remove()},L=()=>{let I=e.querySelector(".bogos-mix-match-shipping-discount-container");I&&I.remove();let O=document.querySelector(A.MIX_MATCH_SHIPPING_DISCOUNT_SECTION_ID)?.innerHTML??A.MIX_MATCH_SHIPPING_DISCOUNT_SECTION,{shipping_icon_path:k}=FGSECOMAPP.fgAppearance?.mix_match?.content??{},w=FGSECOMAPP.helper.templateHTML.render(O,{bogos_shipping_discount_title:P.convertIntegration(S?.shipping_discount?.label??"",`mix_match.${h.id}.tiers.${S.id}.shipping_label`,`mix_match.${h.id}.tiers.${S.id}.shipping_label`),bogos_shipping_icon:k??fgShippingIconsObj["shipping-icon-1.png"]}),D=document.createElement("div");D.innerHTML=w;let B=D.firstElementChild,R=e.querySelector(".bogos-mix-match-widget-body");R&&R.appendChild(B)},N=(I,O)=>{let{discount:k,shipping_discount:w}=O??{},D=k.type===f.DISCOUNT_TYPE.fixed_amount,B=k.type===f.DISCOUNT_TYPE.fixed_price,R=!p.empty(w),F=k.type===f.DISCOUNT_TYPE.percentage,H=k.type===f.DISCOUNT_TYPE.free_products,Y="";D&&(Y=k.value?`(${FGSECOMAPP.helper.templateHTML.render(P.convertIntegration("{{discountAmount}} OFF","customize.mix_match_discount_label","customize.mix_match.discount_text",!0),{discountAmount:`${p.renderPrice(k.value)}`})})`:""),F&&(Y=k.value?`(${FGSECOMAPP.helper.templateHTML.render(P.convertIntegration("{{discountAmount}} OFF","customize.mix_match_discount_label","customize.mix_match.discount_text",!0),{discountAmount:`${k.value+"%"}`})})`:""),H?M():T(),R?L():q(),I.querySelectorAll(".bogos-mix-item-container").forEach(U=>{let W=parseFloat(U.getAttribute("data-item-original-price"));if(U.getAttribute("data-check-item")!=="1")U.querySelector(".bogos-mix-item-discount-price").innerHTML=`${p.renderPrice(W)}`,U.querySelector(".bogos-mix-item-original-price").style.display="none";else{let j=x.calculateDiscountPrice(k,W);U.querySelector(".bogos-mix-item-discount-price").innerHTML=`${p.renderPrice(j)}`;let tt=(m??!0)&&Number(j)!==Number(W);U.querySelector(".bogos-mix-item-original-price").innerHTML=tt?`${p.renderPrice(W)}`:"",U.querySelector(".bogos-mix-item-original-price").style.display=D||B?"none":""}}),I.querySelector(".bogos-mix-match-total .bogos-mix-match-total-original-price").style.display="",I.querySelector(".bogos-mix-match-total-title").innerHTML=P.convertIntegration(r??"Total bundle price","customize.mix_match_total_price","customize.mix_match.total_price_text",!0)+` ${Y}:`,I.querySelector(".bogos-mix-match-button-add").innerHTML=P.convertIntegration(t??"Add bundle to cart","customize.mix_match_add_to_cart","customize.mix_match.button_text",!0)+`${s??!0?` ${Y}`:""} `,I.querySelectorAll(o).forEach(U=>{let W=U.getAttribute("data-discount-id");O.id.toString()===W.toString()?U.classList.add("success"):U.classList.remove("success")})},z=I=>{I.querySelectorAll(".bogos-mix-item-container").forEach(O=>{let k=parseFloat(O.getAttribute("data-item-original-price"));O.querySelector(".bogos-mix-item-discount-price").innerHTML=`${p.renderPrice(k)}`,O.querySelector(".bogos-mix-item-original-price").style.display="none"}),I.querySelector(".bogos-mix-match-total .bogos-mix-match-total-original-price").style.display="none",I.querySelector(".bogos-mix-match-total-title").innerHTML=P.convertIntegration(r??"Total bundle price","customize.mix_match_total_price","customize.mix_match.total_price_text",!0)+":",I.querySelector(".bogos-mix-match-button-add").innerHTML=P.convertIntegration(t??"Add bundle to cart","customize.mix_match_add_to_cart","customize.mix_match.button_text"),I.querySelectorAll(o).forEach(O=>{O.classList.remove("success")}),T(),q()};if(S&&b){let I=S.discount.value;switch(S.discount.type){case f.DISCOUNT_TYPE.percentage:d=n*(100-S.discount.value)/100;break;case f.DISCOUNT_TYPE.fixed_amount:d=Math.max(0,n-I);break;case f.DISCOUNT_TYPE.fixed_price:if(u-S.quantity>0){let D=[];Object.keys(g).forEach(F=>{g[F]&&Object.keys(g[F]).forEach(H=>{D.push({id:parseInt(H),quantity:parseInt(g[F][H].quantity),price:parseFloat(g[F][H].price)})})}),D.sort((F,H)=>H.price-F.price);let B=0,R=0;for(let F=0;F<D.length&&R<S.quantity;F++){let H=Math.min(D[F].quantity,S.quantity-R);B+=D[F].price*H,R+=H}d=I+(n-B)}else d=I;break;case f.DISCOUNT_TYPE.free_products:let k=S.discount.value??[];v.free_products[C]=k;let w=0;k.forEach(D=>{let B=FGSECOMAPP.productsByID[D.id];D.variants.forEach(R=>{let F=B?.variants?.find(Y=>Y.id===R.id),H=parseFloat(R.price)*parseInt(R.quantity??"1");F&&!F?.available&&(H=0),w+=H})}),d=n,n+=w;break;default:d=n}N(e,S)}else z(e);d=d===0||d>=n?n:d,n=n.toFixed(FGSECOMAPP.variables.Shopify?.fg_decimal??2),d=d.toFixed(FGSECOMAPP.variables.Shopify?.fg_decimal??2),e.querySelector(".bogos-mix-match-total .bogos-mix-match-total-original-price").innerHTML=Number(n)!==Number(d)?`${p.renderPrice(n)}`:"",e.querySelector(".bogos-mix-match-total .bogos-mix-match-total-discount-price").innerHTML=`${p.renderPrice(d)}`,e.querySelectorAll(".bogos-mix-item-container").forEach(I=>{let O=I.getAttribute("data-mix-available")==="1";O?(I.querySelector(".bogos-mix-match-quantity-container").classList.remove("sca-d-none"),I.querySelector(".bogos-mix-item-out-stock").classList.add("sca-d-none")):(I.querySelector(".bogos-mix-match-quantity-container").classList.add("sca-d-none"),I.querySelector(".bogos-mix-item-out-stock").classList.remove("sca-d-none")),y&&I.getAttribute("data-check-item")==="1"&&(y=O),e.querySelector(".bogos-mix-match-button-add").disabled=!y})},init:async(e,s)=>{try{await v.filter(s),v.render(e),v.renderEventQuery()}catch(t){console.warn("BOGOS track: mix & match init failed",t)}}},p={...st,getDefaultItemToShowPopupChooseProducts:()=>window.matchMedia("screen and (max-width: 768px)").matches?4:8,convertVariantAddBundle:e=>({id:e.id-0,title:e.title.trim(),price:e.price,quantity:1,thumbnail:e.thumbnail})},et={...at},P={...nt,syncStarRating:async e=>{let s=()=>{};await P.syncRatingProducts([...new Set(e)],f.APP_REVIEW_OPTION.bundle),await P.syncRatingProducts([...new Set(e)],f.APP_REVIEW_OPTION.bundle,s,f.APP_REVIEW.trustoo)}},X={processing:!1,createGlobalVariables:()=>{window.BOGOS_CORE?.helper&&(BOGOS_CORE.helper.bundle={}),document.addEventListener(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_BUNDLE_INIT,()=>{p.debounce(async()=>{X.processing||(X.processing=!0,await x.init(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_BUNDLE_INIT).then(),X.processing=!1)},250)()})},cssLink:()=>{let e=document.querySelector("#bogos-bundle-style"),s=e?.getAttribute("data-url"),t=e?.parentNode??document.body;if(!s||document.querySelector(`[href*="${s}"]`))return;let r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.media="all",r.href=s,t.insertBefore(r,t.firstChild)},init:async()=>{X.createGlobalVariables(),X.cssLink(),await x.init("init")}};X.init().then()})();})();
